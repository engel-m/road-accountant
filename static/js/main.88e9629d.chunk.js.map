{"version":3,"sources":["context/AppReducer.js","context/GlobalState.js","config/Firebase.js","components/views/LoadingScreen.js","context/AuthContext.js","context/GroupListener.js","components/NavLink.js","components/LoginLogoutButton.js","components/NotificationsLink.js","components/Navtop.js","helpers/pushIdGenerator.js","styles/tailwindColors.js","components/modals/AddMemberModal.js","components/modals/CreateGroupModal.js","components/modals/NotificationCard.js","components/modals/NotificationsModal.js","components/modals/ModalTemplate.js","components/views/Landing.js","helpers/demoData.js","components/views/CreateAccount.js","components/MemberBalance.js","components/MemberCard.js","components/MemberDisplay.js","components/Settle.js","helpers/settleCalculator.js","components/transactions/SpenderCheckbox.js","components/transactions/PayerCheckbox.js","components/transactions/AddTransaction.js","components/transactions/Transaction.js","components/transactions/TransactionList.js","components/views/MainAppView.js","components/GroupCard.js","components/views/GroupSelect.js","components/views/ForgotPassword.js","App.js","helpers/viewSwitch.js","index.js"],"names":["state","action","nextState","type","viewName","payload","renderStatus","currentView","modalName","modalView","initialState","GlobalContext","createContext","GlobalProvider","children","useReducer","AppReducer","dispatch","Provider","value","currentGroup","setView","e","preventDefault","setModal","firebase","initializeApp","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","auth","googleAuth","GoogleAuthProvider","firestore","timestamp","Timestamp","fieldValue","FieldValue","LoadingScreen","className","AuthContext","React","AuthProvider","useState","currentUser","authUser","setAuthUser","notifications","setNotifications","pendingAuth","setPendingAuth","demo","setDemo","unsubscribeUser","useRef","unsubNotifications","useEffect","onAuthStateChanged","user","current","collection","doc","uid","onSnapshot","userData","data","console","log","error","notifData","GroupListener","GroupListenerProvider","useContext","setCurrentGroup","pendingGroup","setPendingGroup","unsubscribeGroup","selectedGroup","NavLink","props","onClick","linkType","linkTo","linkHandler","linkText","LoginLogoutButton","signOut","then","catch","NotificationsLink","invites","amount","Object","keys","length","Navtop","burgerMenuOn","setBurgerMenuOn","width","height","viewBox","src","alt","email","xmlns","d","id","generatePushID","PUSH_CHARS","lastPushTime","lastRandChars","now","Date","getTime","duplicateTime","timeStampChars","Array","i","charAt","Math","floor","Error","join","random","tailwindColors","AddMemberModal","setError","htmlFor","maxLength","required","placeholder","nickname","document","querySelector","generatedId","color","groupId","set","groupMembers","displayName","role","merge","message","notifDocId","invitedName","where","get","result","empty","forEach","exists","groupName","name","creatorName","creator","creatorMail","creatorId","createDate","inviteDate","fromDate","toDate","CreateGroupModal","minLength","groupname","time","createdGroupId","add","lastActivity","lastSettled","transactions","returned","im","path","segments","groups","update","NotificationCard","memo","confirmAlert","setConfirmAlert","invite","toLocaleDateString","acceptInvite","deleteInvite","NotificationsModal","delete","map","index","key","userId","ModalTemplate","LandingPage","demoHandler","generatedGroupID","generatedInviteID","secondGeneratedInviteID","currentDate","createUserWithEmailAndPassword","additionalUserInfo","isNewUser","updateProfile","desc","dividedAmount","payers","spenders","demoGroup","signInWithPopup","googleHandler","onSubmit","form","password","signInWithEmailAndPassword","formHandler","CreateAccount","MemberBalance","balance","toFixed","MemberCard","member","slice","toUpperCase","aria-label","data-balloon-pos","MemberDisplay","balances","groupTotals","members","groupmember","everything","average","everythingAfterSettle","averageAfterSettle","Settle","settleOpen","setSettleOpen","settles","setSettles","settleConfirm","setSettleConfirm","success","setSuccess","currentId","calcSettles","balancesObj","results","debt","people","mean","values","reduce","acc","curr","sortedPeople","sort","personA","personB","sortedValuesPaid","person","j","min","push","from","to","settleCalculator","transfer","transactionId","setTimeout","doSettle","SpenderCheckbox","memberId","defaultChecked","PayerCheckbox","authId","AddTransaction","text","setText","setAmount","submitting","setSubmitting","windowOpen","setWindowOpen","spendCheckboxes","querySelectorAll","payCheckboxes","checkbox","checked","abs","step","onChange","target","max","Transaction","transaction","deleteTransaction","date","groupMemberCount","floatAmount","parseFloat","Number","isInteger","parseInt","isCreator","spenderArr","payerInfo","settlement","spender","spenderNames","payer","TransactionList","transactionsObj","sorted","a","b","seconds","MainAppView","lastSettle","setBalances","totals","setTotals","memberObject","transactionsObject","lastKey","memberCount","initBalances","transactionsByMember","calcedTotals","item","total","calcBalances","GroupCard","group","selectGroup","deleteGroup","GroupSelect","groupArray","setGroupArray","loadingGroups","setLoadingGroups","filter","groupIds","getGroups","ForgotPassword","sendPasswordResetEmail","App","View","viewSwitch","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.88e9629d.chunk.js","sourcesContent":["export default (state, action) => {\r\n      const nextState = { ...state };\r\n  switch(action.type) {      \r\n    case 'SET_VIEW':      \r\n      const viewName = action.payload.viewName;\r\n      nextState.renderStatus.currentView = viewName;\r\n      return nextState;\r\n    case 'SET_MODAL':\r\n      const modalName = action.payload.modalName;\r\n      nextState.renderStatus.modalView = modalName;\r\n      return nextState; \r\n    default:\r\n      return state;\r\n  }\r\n}","import React, { createContext, useReducer } from 'react';\r\nimport AppReducer from './AppReducer';\r\n\r\n// Initial state\r\nconst initialState = {\r\n  renderStatus: {    \r\n    currentView: 'Landing',\r\n    modalView: false,\r\n  }\r\n}\r\n\r\n// Create context\r\nexport const GlobalContext = createContext(initialState);\r\n\r\n// Provider component\r\nexport const GlobalProvider = ({ children }) => {\r\n  const [state, dispatch] = useReducer(AppReducer, initialState);\r\n\r\n  // Toggle Component Rendering (Render and remove modals f.e.)\r\n  function setView(viewName, e = '') {\r\n    if (e !== '') {\r\n      e.preventDefault()\r\n    }\r\n    dispatch({\r\n      type: 'SET_VIEW',\r\n      payload: {viewName}\r\n    });\r\n  }\r\n\r\n  function setModal(modalName, e = '') {\r\n    if (e !== '') {\r\n      e.preventDefault()\r\n    }\r\n    dispatch({\r\n      type: 'SET_MODAL',\r\n      payload: {modalName}\r\n    });\r\n  }\r\n\r\n  return (<GlobalContext.Provider value={{\r\n    renderStatus: state.renderStatus,\r\n    currentGroup: state.currentGroup,    \r\n    setView,\r\n    setModal\r\n  }}>\r\n    {children}\r\n  </GlobalContext.Provider>);\r\n}","import firebase from 'firebase/app';\r\nimport 'firebase/auth';\r\nimport 'firebase/firestore';\r\n\r\nconst firebaseConfig = ({\r\n  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\r\n  authDomain: process.env.REACT_APP_AUTH_DOMAIN,\r\n  databaseURL: process.env.REACT_APP_DATABASE_URL,\r\n  projectId: process.env.REACT_APP_PROJECT_ID,\r\n  storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.REACT_APP_MESSAGING_SENDER_ID,\r\n  appId: process.env.REACT_APP_APP_ID\r\n});\r\n\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\n\r\nexport const auth = firebase.auth();\r\nexport const googleAuth = new firebase.auth.GoogleAuthProvider();\r\nexport const firestore = firebase.firestore();\r\nexport const timestamp = firebase.firestore.Timestamp;\r\nexport const fieldValue = firebase.firestore.FieldValue;\r\n\r\n\r\n\r\n\r\n\r\n","import React from 'react'\r\n\r\nexport const LoadingScreen = () => {\r\n\r\n  return (\r\n    <>\r\n    <div className=\"animated fadeIn h-screen mx-auto flex content-center justify-center\">\r\n      <span className=\"text-indigo-600 opacity-75 mx-auto block self-center -mt-24\">\r\n        <i className=\"fas fa-circle-notch fa-spin fa-5x\"></i>\r\n      </span>\r\n    </div>\r\n    </>\r\n  )\r\n}","import React, { useEffect, useState, useRef } from \"react\";\r\nimport { auth, firestore } from \"../config/Firebase.js\";\r\nimport { LoadingScreen } from \"../components/views/LoadingScreen.js\";\r\n\r\nexport const AuthContext = React.createContext();\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n  const [authUser, setAuthUser] = useState(auth.currentUser);  \r\n  const [notifications, setNotifications] = useState(null);\r\n  const [pendingAuth, setPendingAuth] = useState(true);\r\n  const [demo, setDemo] = useState(false);\r\n  \r\n  let unsubscribeUser = useRef(null);\r\n  let unsubNotifications = useRef(null);\r\n  \r\n  useEffect(() => {\r\n    auth.onAuthStateChanged( (user) => {\r\n      if (!user) {        \r\n        setAuthUser(null);\r\n        setNotifications(null);\r\n        unsubscribeUser.current && unsubscribeUser.current();\r\n        unsubscribeUser.current = null;\r\n        unsubNotifications.current && unsubNotifications.current();\r\n        unsubNotifications.current = null;\r\n        setPendingAuth(false);\r\n      } else if (user) { \r\n        unsubscribeUser.current = \r\n          firestore.collection(\"Users\").doc(user.uid).onSnapshot( userData => {\r\n            let user = userData.data();\r\n            if (typeof user !== 'undefined' && user !== null) {\r\n              user.demo ? setDemo(true) : setDemo(false);\r\n            }         \r\n            setAuthUser(userData.data()); \r\n            console.log('Updated user data from new snapshot');              \r\n          }, function(error) {\r\n            console.log(error);\r\n          });  \r\n\r\n        unsubNotifications.current = \r\n        firestore.collection(\"Notifications\").doc(user.uid).onSnapshot( notifData => {\r\n          setNotifications(notifData.data()); \r\n          console.log('Updated notifications from new snapshot');              \r\n        }, function(error) {\r\n          console.log(error);\r\n        });  \r\n        console.log('Listening to user data and notifications');                 \r\n        setPendingAuth(false);      \r\n      } \r\n    });\r\n    \r\n    return () => {\r\n      console.log('Returned Auth / Notifications Listener useEffect, unsubscribing');\r\n      unsubscribeUser.current && unsubscribeUser.current();\r\n      unsubscribeUser.current = null; \r\n      unsubNotifications.current && unsubNotifications.current();\r\n      unsubNotifications.current = null;\r\n    };\r\n\r\n  }, []);\r\n\r\n  if(pendingAuth){\r\n    return <LoadingScreen />\r\n  }\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{\r\n        authUser,\r\n        demo,\r\n        unsubscribeUser,\r\n        notifications,\r\n        unsubNotifications\r\n      }}\r\n    >\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};","import React, { useContext, useEffect, useState, useRef } from \"react\";\r\nimport { firestore } from \"../config/Firebase.js\";\r\nimport { GlobalContext } from './GlobalState';\r\nimport { AuthContext } from './AuthContext';\r\nimport { LoadingScreen } from \"../components/views/LoadingScreen.js\";\r\n\r\nexport const GroupListener = React.createContext();\r\n\r\nexport const GroupListenerProvider = ({ children }) => {\r\n  const { authUser } = useContext(AuthContext);  \r\n  const { setView } = useContext(GlobalContext);\r\n\r\n  const [currentGroup, setCurrentGroup] = useState(null);\r\n  const [pendingGroup, setPendingGroup] = useState(true);\r\n  \r\n  let unsubscribeGroup = useRef(null);\r\n \r\n  useEffect(() => {   \r\n    if (!authUser) {\r\n      setCurrentGroup(null);\r\n      unsubscribeGroup.current && unsubscribeGroup.current();\r\n      unsubscribeGroup.current = null;\r\n      setPendingGroup(false);        \r\n    }\r\n\r\n    if (authUser) {  \r\n      if (authUser.selectedGroup) {         \r\n        unsubscribeGroup.current && unsubscribeGroup.current();\r\n        unsubscribeGroup.current =\r\n          firestore.collection(\"Groups\").doc(authUser.selectedGroup).onSnapshot( data => {\r\n            setCurrentGroup(data.data()) \r\n            console.log('Updated currentGroup state from new snapshot')           \r\n          }, (error) => {\r\n            console.log(error)\r\n          });   \r\n        console.log('New group listener started, groupId: ' + authUser.selectedGroup)  \r\n        setView('MainAppView')   \r\n      } else {\r\n        setCurrentGroup(null) \r\n        setView('GroupSelect')\r\n      }\r\n      setPendingGroup(false); \r\n    }\r\n\r\n    return () => {\r\n      console.log('Returned Grouplistener useEffect, unsubscribing')\r\n      unsubscribeGroup.current && unsubscribeGroup.current();\r\n      unsubscribeGroup.current = null;      \r\n    };   \r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [authUser]);\r\n\r\n      \r\n\r\n  if(pendingGroup){\r\n    return (\r\n      <LoadingScreen />\r\n    )\r\n  }\r\n\r\n  return (\r\n    <GroupListener.Provider\r\n      value={{\r\n        currentGroup,\r\n        pendingGroup,\r\n        unsubscribeGroup\r\n      }}\r\n    >\r\n      {children}\r\n    </GroupListener.Provider>\r\n  );\r\n};","import React, { useContext } from 'react';\r\nimport { GlobalContext } from '../context/GlobalState';\r\n\r\nexport const NavLink = (props) => {\r\n  const { setView, setModal } = useContext(GlobalContext);\r\n  \r\n  const linkHandler = (linkType, linkTo, e) => {\r\n    if (linkType === 'Modal') {\r\n      setModal(linkTo, e);\r\n    }\r\n    if (linkType === 'View') {\r\n      setView(linkTo, e);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n    <span onClick={(e) => linkHandler(props.linkType, props.linkTo, e)}\r\n      className=\"block cursor-pointer lg:inline-block text-md font-bold text-purple-900 sm:hover:border-indigo-400  hover:text-orange-500 mx-2 \r\n       focus:text-blue-500 p-1 hover:bg-gray-300 sm:hover:bg-transparent rounded-lg\">\r\n      {props.linkText}\r\n    </span>\r\n    </>\r\n  )\r\n}","import React, { useContext } from 'react';\r\nimport { GlobalContext } from '../context/GlobalState';\r\nimport { GroupListener } from '../context/GroupListener';\r\nimport { AuthContext } from '../context/AuthContext';\r\nimport { auth } from '../config/Firebase'\r\n\r\nexport const LoginLogoutButton = () => {\r\n  const { setView } = useContext(GlobalContext); \r\n  const { authUser, unsubscribeUser, unsubNotifications } = useContext(AuthContext); \r\n  const { unsubscribeGroup } = useContext(GroupListener); \r\n \r\n  const logSwitch = () => {\r\n    // Log out functionality\r\n    if (authUser) {\r\n      if (unsubscribeUser.current) {\r\n        unsubscribeUser.current();\r\n        unsubscribeUser.current = null;\r\n      }     \r\n      if (unsubscribeGroup.current) {\r\n        unsubscribeGroup.current();\r\n        unsubscribeGroup.current = null;\r\n      } \r\n      if (unsubNotifications.current) {\r\n        unsubNotifications.current();\r\n        unsubNotifications.current = null;\r\n      }\r\n      auth.signOut()\r\n      .then( () => {\r\n        setView('Landing');\r\n      }).catch( (error) => {\r\n        console.log('Error Logging Out:' + error)\r\n      });          \r\n    }\r\n    // Log in functionality\r\n    else {\r\n      setView('Landing');\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n    <span onClick={logSwitch}\r\n      className=\"cursor-pointer lg:inline-block text-md font-bold  text-purple-900  sm:hover:border-indigo-400  hover:text-orange-500 mx-2 \r\n       focus:text-blue-500  p-1 hover:bg-gray-300 sm:hover:bg-transparent rounded-lg\">\r\n      {authUser ? 'LOG OUT' : 'LOG IN'}\r\n    </span>\r\n    </>\r\n  )\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import React, { useContext } from 'react';\r\nimport { GlobalContext } from '../context/GlobalState';\r\nimport { AuthContext } from '../context/AuthContext';\r\n\r\nexport const NotificationsLink = () => {\r\n  const { setModal } = useContext(GlobalContext); \r\n  const { notifications } = useContext(AuthContext); \r\n\r\n  const invites = notifications ? notifications.invites : null;\r\n  const amount = invites ? Object.keys(invites).length : null; \r\n\r\n  return (\r\n    <>\r\n    {/* <span onClick={(e) => setModal('Notifications', e)} */}\r\n    { amount ? <span onClick={(e) => setModal('NotificationsModal', e)}\r\n        className=\"cursor-pointer lg:inline-block text-sm font-bold bg-green-500 text-white sm:hover:border-indigo-400 mx-2 \r\n          p-1 hover:bg-green-600 hover:shadow-lg rounded-lg\">\r\n        {amount}  NEW INVITES!</span> \r\n      : null }\r\n    </>\r\n  )\r\n}\r\n","import React, { useContext, useState } from 'react';\r\nimport { GlobalContext } from '../context/GlobalState';\r\nimport { AuthContext } from '../context/AuthContext';\r\nimport { NavLink } from './NavLink';\r\nimport { LoginLogoutButton } from './LoginLogoutButton';\r\nimport { NotificationsLink } from './NotificationsLink';\r\n\r\n  \r\nexport const Navtop = () => {   \r\n  const { renderStatus, setView } = useContext(GlobalContext); \r\n  const { authUser } = useContext(AuthContext);\r\n  const currentView = renderStatus.currentView; \r\n  const [burgerMenuOn, setBurgerMenuOn] = useState(false);\r\n\r\n  return (\r\n  <header>\r\n  <div className=\"py-3 px-2 lg:mx-4 xl:mx-12\">\r\n    <div className=\"\">\r\n        <nav className=\"border-b flex items-center justify-between flex-wrap pb-4\">\r\n          <div className=\"flex items-center flex-no-shrink text-white mr-6 \">\r\n            <img onClick={authUser ? (e) => {setView('MainAppView', e)} : (e) => {setView('Landing', e)}} className=\"h-12 w-12 ml-2 mr-2 cursor-pointer\" width=\"64\" height=\"64\" viewBox=\"0 0 64 64\" \r\n              src=\"img/road-icon.svg\" alt=\"Road Accountant Logo\"/>\r\n            <span onClick={authUser ? (e) => {setView('MainAppView', e)} : (e) => {setView('Landing', e)}} className=\"text-2xl font-extrabold text-purple-900 mt-2 hover:text-blue-700 font-black cursor-pointer\">\r\n              Road Accountant</span> \r\n            <span className=\"hidden md:inline-block ml-12 text-sm font-extrabold text-green-700 mt-2 hover:text-green-600 font-black cursor-pointer\">\r\n             {authUser ? 'Logged in as ' + authUser.email : \"\"}</span> \r\n          </div>\r\n          <div className=\"block lg:hidden\" onClick={ (e) => {\r\n                e.preventDefault() \r\n                setBurgerMenuOn(!burgerMenuOn)\r\n              }}>\r\n              <button \r\n                  className=\"navbar-burger flex items-center px-3 py-2 border rounded text-white border-white hover:text-white hover:border-white\">\r\n                  <svg className=\"fill-current h-6 w-6 text-gray-700\" viewBox=\"0 0 20 20\"\r\n                      xmlns=\"http://www.w3.org/2000/svg\">\r\n                      <title>Menu</title>\r\n                      <path d=\"M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z\" />\r\n                  </svg>\r\n              </button>\r\n          </div>\r\n          <div id=\"main-nav\" className={\"w-full text-right flex-grow lg:flex items-center lg:w-auto mt-4 md:mt-2 \" + (burgerMenuOn ? \"\" : \"hidden\") + \" \"}>\r\n            <div className=\"text-xl lg:text-base lg:flex-grow mt-2 animated jackinthebox xl:mx-8\">\r\n              {authUser && <span className=\"md:hidden block ml-12 text-sm font-extrabold text-green-700 mt-2 hover:text-green-600 font-black cursor-pointer\">\r\n                Logged in as {authUser.email}</span>}\r\n              {authUser && <NotificationsLink />} \r\n              {authUser && <NavLink linkText={'+ CREATE GROUP'} linkType={'Modal'} linkTo={'CreateGroupModal'} />}\r\n              {authUser && <NavLink linkText={'>MY GROUPS'} linkType={'View'} \r\n              linkTo={ (currentView === 'GroupSelect' && authUser.selectedGroup) ? 'MainAppView' : 'GroupSelect'}/>}\r\n              {!authUser && <NavLink linkText={'CREATE ACCOUNT'} linkType={'View'} linkTo={'CreateAccount'} />}\r\n              <LoginLogoutButton />            \r\n              {/* <NavLink linkText={'ABOUT'} linkType={'View'} linkTo={'About'} /> */}\r\n            </div>\r\n          </div>\r\n        </nav>\r\n    </div>\r\n  </div>\r\n  </header>\r\n\r\n  )\r\n}\r\n\r\n\r\n","/**\r\n * Fancy ID generator that creates 20-character string identifiers with the following properties:\r\n *\r\n * 1. They're based on timestamp so that they sort *after* any existing ids.\r\n * 2. They contain 72-bits of random data after the timestamp so that IDs won't collide with other clients' IDs.\r\n * 3. They sort *lexicographically* (so the timestamp is converted to characters that will sort properly).\r\n * 4. They're monotonically increasing.  Even if you generate more than one in the same timestamp, the\r\n *    latter ones will sort after the former ones.  We do this by using the previous random bits\r\n *    but \"incrementing\" them by 1 (only in the case of a timestamp collision).\r\n */\r\nexport const generatePushID = (function() {\r\n  // Modeled after base64 web-safe chars, but ordered by ASCII.\r\n  var PUSH_CHARS = '-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz';\r\n\r\n  // Timestamp of last push, used to prevent local collisions if you push twice in one ms.\r\n  var lastPushTime = 0;\r\n\r\n  // We generate 72-bits of randomness which get turned into 12 characters and appended to the\r\n  // timestamp to prevent collisions with other clients.  We store the last characters we\r\n  // generated because in the event of a collision, we'll use those same characters except\r\n  // \"incremented\" by one.\r\n  var lastRandChars = [];\r\n\r\n  return function() {\r\n    var now = new Date().getTime();\r\n    var duplicateTime = (now === lastPushTime);\r\n    lastPushTime = now;\r\n\r\n    var timeStampChars = new Array(8);\r\n    for (var i = 7; i >= 0; i--) {\r\n      timeStampChars[i] = PUSH_CHARS.charAt(now % 64);\r\n      // NOTE: Can't use << here because javascript will convert to int and lose the upper bits.\r\n      now = Math.floor(now / 64);\r\n    }\r\n    if (now !== 0) throw new Error('We should have converted the entire timestamp.');\r\n\r\n    var id = timeStampChars.join('');\r\n\r\n    if (!duplicateTime) {\r\n      for (i = 0; i < 12; i++) {\r\n        lastRandChars[i] = Math.floor(Math.random() * 64);\r\n      }\r\n    } else {\r\n      // If the timestamp hasn't changed since last push, use the same random number, except incremented by 1.\r\n      for (i = 11; i >= 0 && lastRandChars[i] === 63; i--) {\r\n        lastRandChars[i] = 0;\r\n      }\r\n      lastRandChars[i]++;\r\n    }\r\n    for (i = 0; i < 12; i++) {\r\n      id += PUSH_CHARS.charAt(lastRandChars[i]);\r\n    }\r\n    if(id.length !== 20) throw new Error('Length should be 20.');\r\n\r\n    return id;\r\n  };\r\n})();","export const tailwindColors = ['black','gray-600','gray-700',\r\n'gray-800','gray-900','red-400','red-500','red-600','red-700','red-800',\r\n'orange-400','orange-500','orange-600','orange-700','orange-800',\r\n'yellow-400','yellow-500','yellow-600','yellow-700','yellow-800',\r\n'green-700','green-800',\r\n'teal-400','teal-500','teal-600','teal-700','teal-800','blue-300',\r\n'blue-500','blue-600','blue-700','blue-800','indigo-300','indigo-400',\r\n'indigo-500','indigo-600','indigo-700','indigo-800','indigo-900','purple-300','purple-400','purple-500',\r\n'purple-600','purple-700','purple-800','pink-300','pink-400','pink-500','pink-600',\r\n'pink-700','pink-800'];","import React, { useContext, useState } from 'react';\r\nimport { GroupListener } from '../../context/GroupListener';\r\nimport { firestore, timestamp } from \"../../config/Firebase.js\";\r\nimport { generatePushID } from \"../../helpers/pushIdGenerator.js\";\r\nimport { tailwindColors } from '../../styles/tailwindColors';\r\n\r\nexport const AddMemberModal = (props) => {   \r\n  const setModal = props.setModal;    \r\n  const { currentGroup } = useContext(GroupListener);\r\n  const [error, setError] = useState(''); \r\n\r\n  const addByName = (e) => {\r\n    e.preventDefault();\r\n    const form = document.querySelector('#name-form');\r\n    const nickname = form['nickname'].value;    \r\n    const generatedId = generatePushID();\r\n    const color = tailwindColors[Math.floor(Math.random() * tailwindColors.length)];\r\n    setError(null);\r\n    if (currentGroup) {      \r\n      firestore.collection(\"Groups\").doc(currentGroup.groupId).set({\r\n        groupMembers: {\r\n          [generatedId]: {\r\n            color: color,\r\n            displayName: nickname,\r\n            email: 'User not registered',\r\n            role: 'npc'\r\n          }\r\n        },\r\n      }, {merge: true}).then (\r\n        !error && setModal(false)\r\n      ).catch( (error) => {\r\n        setError(error.message)\r\n      });    \r\n    }\r\n  }\r\n\r\n  const addByEmail = (e) => {\r\n    e.preventDefault();\r\n    const form = document.querySelector('#email-form');\r\n    const email = form['email'].value; \r\n    const color = tailwindColors[Math.floor(Math.random() * tailwindColors.length)];\r\n    let notifDocId = null;\r\n    let invitedName = null;   \r\n    \r\n    if (currentGroup) {\r\n      const emailQuery = firestore.collection(\"Notifications\").where(\"email\", \"==\", email);\r\n      emailQuery.get().then( (result) => {\r\n        if (result.empty) {\r\n          setError('No user found with email ' + email)\r\n        } else {\r\n          result.forEach( (doc) => {                        \r\n            notifDocId = doc.id;\r\n            invitedName = doc.data().displayName;\r\n            let exists = (typeof currentGroup.groupMembers[notifDocId] !== 'undefined') ? true : false;\r\n            if (exists) {\r\n              throw new Error('User is already in group!');\r\n            }                \r\n            !exists && firestore.collection(\"Groups\").doc(currentGroup.groupId).set({\r\n              groupMembers: {\r\n                [notifDocId]: {\r\n                  color: color,\r\n                  displayName: invitedName,\r\n                  email: email,\r\n                  role: 'member'\r\n                }\r\n              },\r\n            }, {merge: true}).then (\r\n              firestore.collection(\"Notifications\").doc(notifDocId).set({\r\n                invites: {\r\n                  [currentGroup.groupId]: {\r\n                    groupName: currentGroup.name,\r\n                    creatorName: currentGroup.creator.name,\r\n                    creatorMail: currentGroup.creator.email,\r\n                    creatorId: currentGroup.creator.id,\r\n                    createDate: currentGroup.createDate,\r\n                    groupId: currentGroup.groupId,\r\n                    inviteDate: timestamp.fromDate(new Date()).toDate()\r\n                  }\r\n                },\r\n              }, {merge: true})).then (\r\n                (error === '') && setModal(false)\r\n              ).catch( (error) => {\r\n                console.log(error)\r\n                setError(error.message)\r\n              }); \r\n          });          \r\n        }\r\n      }).catch( (error) => {\r\n        console.log(error)\r\n        setError(error.message)\r\n      });     \r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n    {/* Modal Header */}\r\n    <div className=\"modal-content py-4 text-center px-6\">\r\n\r\n      <div className=\"flex justify-between items-center pb-3\">\r\n        <p className=\"text-2xl text-indigo-700 font-bold\">ADD GROUP MEMBER</p>\r\n        <div onClick={(e) => setModal(false, e)} className=\"modal-close cursor-pointer z-50\">\r\n          <p className=\"font-black text-gray-700\">X</p>\r\n        </div>\r\n      </div>      \r\n\r\n      {/* Add a non-registered member by name */}\r\n      <p className=\"text-lg mt-2 text-gray-800\">Add a person in your group that you will manage expenses for:</p>\r\n      <form id=\"name-form\">        \r\n        <div className=\"relative w-full mb-3\">\r\n          <label\r\n            className=\"block uppercase text-gray-700 text-xs font-bold mb-2\"\r\n            htmlFor=\"nickname\">\r\n            Nickname <span className=\"text-gray-700 normal-case italic opacity-50\"></span>\r\n          </label>\r\n          <input\r\n            type=\"nickname\" id=\"nickname\" maxLength=\"12\" required\r\n            className=\"px-3 py-3 placeholder-gray-400 text-gray-700 bg-white rounded text-sm shadow focus:outline-none focus:shadow-outline w-full\"\r\n            placeholder=\"Nickname\"/>\r\n        </div>\r\n\r\n        <div className=\"text-center mt-6\">\r\n          <button\r\n            className=\"modal-close px-4 bg-indigo-600 p-3 rounded-lg text-white hover:bg-indigo-400\"\r\n            type=\"submit\" onClick={addByName}>\r\n            Add to Group\r\n          </button>\r\n        </div>     \r\n      </form>   \r\n\r\n        <div className=\"w-full rounded-lg bg-gray-300 mt-6 mb-5\">\r\n          <p className=\"text-2xl text-indigo-700 font-bold\">OR</p>\r\n        </div>\r\n\r\n      {/* Invite existing user by email + add to group form */}\r\n      <p className=\"text-lg text-gray-800\">Invite a user to see and use this group, by the e-mail they registered with:</p>\r\n      <form id=\"email-form\" className=\"mt-4\">        \r\n        <div className=\"relative w-full mb-3\">\r\n          <label\r\n            className=\"block uppercase text-gray-700 text-xs font-bold mb-2\"\r\n            htmlFor=\"email\">\r\n            User E-mail <span className=\"text-gray-700 normal-case italic opacity-50\"></span>\r\n          </label>\r\n          <input\r\n            type=\"email\" id=\"email\" required\r\n            className=\"px-3 py-3 placeholder-gray-400 text-gray-700 bg-white rounded text-sm shadow focus:outline-none focus:shadow-outline w-full\"\r\n            placeholder=\"E-mail\"/>\r\n        </div>\r\n\r\n        <div className=\"text-center mt-6 mb-5\">\r\n          <button\r\n            className=\"modal-close px-4 bg-indigo-600 p-3 rounded-lg text-white hover:bg-indigo-400\"\r\n            type=\"submit\" onClick={addByEmail}>\r\n            Invite to Group\r\n          </button>\r\n        </div>     \r\n      </form>   \r\n\r\n      {error !== '' && <div className=\"bg-red-100 p-3 border-red-600 border rounded\"><p className=\"text-red-600 text-center\">\r\n          {error}</p></div>}   \r\n\r\n    </div>    \r\n    </>\r\n  );\r\n};\r\n\r\n\r\n\r\n\r\n","import React, { useState, useContext } from 'react';\r\nimport { auth, firestore, timestamp } from \"../../config/Firebase.js\";\r\nimport { AuthContext } from '../../context/AuthContext';\r\n\r\n\r\nexport const CreateGroupModal = (props) => {  \r\n  const { demo } = useContext(AuthContext); \r\n  const [error, setError] = useState('');  \r\n  const setModal = props.setModal; \r\n  \r\n  const formHandler = (e) => {\r\n    e.preventDefault();\r\n    if (demo) {\r\n      setError('Please make a real account to create new groups!');\r\n      return;\r\n    }  \r\n    const form = document.querySelector('#modal-form');\r\n    const groupname = form['groupname'].value;       \r\n    const time = timestamp.fromDate(new Date()).toDate();\r\n    let createdGroupId = null;\r\n\r\n    firestore.collection(\"Groups\").add({\r\n      groupMembers: {\r\n        [auth.currentUser.uid]: {\r\n          color: 'green-500',\r\n          displayName: auth.currentUser.displayName,\r\n          email: auth.currentUser.email,\r\n          role: 'creator'\r\n        }\r\n      },\r\n      creator: {\r\n        name: auth.currentUser.displayName,\r\n        email: auth.currentUser.email,\r\n        id: auth.currentUser.uid\r\n      },\r\n      createDate: time,\r\n      demo: false,\r\n      lastActivity: time,\r\n      lastSettled: null,\r\n      name: groupname,\r\n      transactions: null\r\n    }).then ( returned => {\r\n      createdGroupId = returned.im.path.segments[1];\r\n      firestore.collection(\"GroupsByUser\").doc(auth.currentUser.uid).set({\r\n        demo: false,\r\n        groups: {\r\n          [createdGroupId]: {\r\n            groupId: createdGroupId,\r\n            name: groupname,\r\n            creator: auth.currentUser.displayName,\r\n            creatorId: auth.currentUser.uid,\r\n            creatorMail: auth.currentUser.email,\r\n            createDate: timestamp.fromDate(new Date()).toDate(),\r\n            lastActivity: timestamp.fromDate(new Date()).toDate()\r\n          }\r\n        }        \r\n      }, {merge: true})   \r\n    }).then ( () => {\r\n      firestore.collection(\"Users\").doc(auth.currentUser.uid).update({\r\n        selectedGroup: createdGroupId\r\n      })      \r\n    }).then (\r\n      () => setModal(false)\r\n    ).catch( (error) => {\r\n      setError(error.message)\r\n    });    \r\n  }\r\n\r\n  return (\r\n    <>\r\n    {/* Modal Header */}\r\n    <div className=\"modal-content py-4 text-center px-6\">\r\n\r\n      <div className=\"flex justify-between items-center pb-3\">\r\n        <p className=\"text-2xl text-indigo-600 font-bold\">CREATE A GROUP</p>\r\n        <div onClick={(e) => setModal(false, e)} className=\"modal-close cursor-pointer z-50\">\r\n          <p className=\"font-black text-gray-700\">X</p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Content */}\r\n      <form id=\"modal-form\">\r\n        <div className=\"relative w-full mb-3\">\r\n          <label\r\n            className=\"block uppercase text-gray-700 text-xs font-bold mb-2\"\r\n            htmlFor=\"groupname\">\r\n            Group Name <span className=\"text-gray-700 normal-case italic opacity-50\">(Required)</span>\r\n          </label>\r\n          <input\r\n            type=\"text\" id=\"groupname\" minLength=\"3\" maxLength=\"40\" required\r\n            className=\"px-3 py-3 placeholder-gray-400 text-gray-700 bg-white rounded text-sm shadow focus:outline-none focus:shadow-outline w-full\"\r\n            placeholder=\"Group Name\"/>\r\n        </div>\r\n\r\n        {error !== '' && <div className=\"bg-red-100 p-3 border-red-600 border rounded\"><p className=\"text-red-600 text-center\">\r\n          {error}</p></div>}   \r\n\r\n        <div className=\"text-center mt-6\">\r\n          <button\r\n            className=\"modal-close px-4 bg-indigo-600 p-3 rounded-lg text-white hover:bg-indigo-400\"\r\n            type=\"submit\" onClick={formHandler}>\r\n            Create Group\r\n          </button>\r\n        </div>\r\n      </form>   \r\n\r\n    </div>    \r\n    </>\r\n  );\r\n};\r\n\r\n\r\n\r\n\r\n","import React, { useState } from 'react';\r\n\r\nexport const NotificationCard = React.memo(props => {\r\n  const [confirmAlert, setConfirmAlert] = useState(false);\r\n  const invite = props.invite;\r\n\r\n  return (   \r\n    <>   \r\n    <div className=\"relative flex w-full pt-4 pb-5 md:pb-1 my-2 justify-between bg-white shadow-md flex-shrink flex-wrap rounded mx-1\r\n      hover:bg-indigo-100 hover:shadow-xl border-2 border-transparent hover:border-indigo-200 focus:bg-indigo-100 focus:shadow-xl\">\r\n\r\n      <div className=\"inline-block lg:w-1/12 ml-2\">\r\n        <span \r\n          className=\"cursor-default text-xs md:text-sm text-blue-800 font-bold\">\r\n          { invite.inviteDate.toDate().toLocaleDateString() } </span>\r\n      </div>\r\n\r\n      <div className=\"md:inline-block w-full lg:w-8/12 mt-1 text-center text-xs md:text-sm lg:text-xl cursor-default\">\r\n        <span className=\"font-bold text-indigo-800\">You were invited to join group </span>\r\n        <span className=\"font-bold text-green-600\">{invite.groupName}</span>\r\n        <span className=\"font-bold text-indigo-800\"> by </span>\r\n        <span className=\"font-bold text-green-900\">{ invite.creatorName }</span>\r\n        <span className=\"font-bold text-indigo-800\">!</span>            \r\n      </div>\r\n\r\n      <div className=\"flex flex-shrink w-full lg:w-2/12 mt-3 lg:mt-0 justify-center\">      \r\n        <div onClick={(e) => props.acceptInvite(invite.groupId, e)} className=\"rounded-lg bg-green-200 py-2 px-2 mb-3 hover:bg-green-700 text-green-400 hover:text-white\">\r\n          <p className=\"font-bold text-sm md:text-lg cursor-pointer\">Accept</p>\r\n        </div>\r\n        <div onClick={() => setConfirmAlert(!confirmAlert)} className=\"rounded-lg bg-red-200 py-2 px-2 mb-3 hover:bg-red-700 text-red-400 hover:text-white ml-2\">\r\n          <p className=\"font-bold text-sm md:text-lg cursor-pointer\">Decline</p>\r\n        </div>\r\n      </div>\r\n    </div>       \r\n\r\n    <div className={\"flex p-3 w-full md:w-8/12 bg-red-200 text-bold flex-wrap justify-center text-center rounded-lg text-sm md:text-lg \" + ( confirmAlert ? \"\" : \"hidden\") + \" \"}>\r\n      <h1 className={\"w-full block font-bold text-red-700 mb-4\"}>Are you sure you want to delete this invitation to group {invite.groupName}?</h1>\r\n      <h1 className={\"w-full block font-bold text-red-700 mb-4\"}>(This will remove your option to join this group.)</h1>\r\n      <div onClick={() => setConfirmAlert(false)} \r\n        className=\"inline-block mx-2 w-4/12 bg-red-600 p-2 rounded-lg text-white focus:outline-none cursor-pointer shadow hover:shadow-inner \r\n          border border-transparent hover:border-red-700\">Cancel</div>\r\n      <div onClick={(e) => props.deleteInvite(invite.groupId, e)}  \r\n        className=\"inline-block mx-2 w-4/12 bg-indigo-800 p-2 rounded-lg text-white focus:outline-none cursor-pointer shadow hover:shadow-inner \r\n          border border-transparent hover:border-indigo-900\">&#10003;</div>\r\n    </div>\r\n\r\n    </>\r\n  );\r\n\r\n});\r\n\r\n\r\n\r\n\r\n","import React, { useContext, useState } from 'react';\r\nimport { firestore, timestamp, fieldValue } from \"../../config/Firebase.js\";\r\nimport { AuthContext } from '../../context/AuthContext';\r\nimport { NotificationCard } from './NotificationCard';\r\n\r\n\r\nexport const NotificationsModal = (props) => {   \r\n  const setModal = props.setModal;    \r\n  const setView = props.setView;    \r\n  const { authUser, demo, notifications } = useContext(AuthContext); \r\n  const [error, setError] = useState(''); \r\n  const invites = notifications ? notifications.invites : null;\r\n\r\n  const acceptInvite = (id, e = '') => {\r\n    (e !== '') && e.preventDefault();  \r\n    if (demo) {\r\n      setError('These notifications are for demo purposes. Please make a real account to use these features.');\r\n      return;\r\n    }  \r\n    firestore.collection('Users').doc(authUser.uid).update({\r\n      selectedGroup: id\r\n    }).catch( (error) => {\r\n      console.log(error);\r\n      setError(error.message);\r\n    })       \r\n    firestore.collection('GroupsByUser').doc(authUser.uid).set({\r\n      groups: {\r\n        [id]: {\r\n          createDate: invites[id].createDate,\r\n          creator: invites[id].creatorName,\r\n          creatorId: invites[id].creatorId,\r\n          creatorMail: invites[id].creatorMail,\r\n          groupId: invites[id].groupId,\r\n          lastActivity: timestamp.fromDate(new Date()).toDate(),\r\n          name: invites[id].groupName\r\n        }\r\n      }\r\n    }, { merge: true }).then( \r\n      firestore.collection(\"Notifications\").doc(authUser.uid).set({ \r\n        invites: {\r\n          [id]: fieldValue.delete()\r\n        }\r\n      }, { merge: true })\r\n    ).then( () => {\r\n      setView('MainAppView');\r\n      setModal(false); \r\n    }).catch( (error) => {\r\n      console.log(error);\r\n      setError(error.message);\r\n    })     \r\n  };\r\n\r\n  const deleteInvite = (id, e = '') => {\r\n    (e !== '') && e.preventDefault();    \r\n    firestore.collection(\"Notifications\").doc(authUser.uid).set({ \r\n      invites: {\r\n        [id]: fieldValue.delete()\r\n      }\r\n    }, { merge: true })\r\n    .then( () => {\r\n      setModal(false); \r\n    }).catch( (error) => {\r\n      console.log(error);\r\n      setError(error.message);\r\n    })      \r\n  };\r\n\r\n  return (\r\n    <>\r\n    {/* Modal Header */}\r\n    <div className=\"modal-content w-full py-4 text-center px-6\">\r\n\r\n      <div className=\"flex justify-between items-center pb-3\">\r\n        <p className=\"text-2xl text-indigo-700 font-bold\">NOTIFICATIONS</p>\r\n        <div onClick={(e) => setModal(false, e)} className=\"modal-close cursor-pointer z-50\">\r\n          <p className=\"font-black text-gray-700\">X</p>\r\n        </div>\r\n      </div>      \r\n\r\n      {/* Notification Cards */}\r\n      <div className=\"animated fadeIn w-full mx-auto md:mt-2 flex flex-wrap flex-column items-center justify-center\">        \r\n      { invites && Object.keys(invites).map( (invite, index) => (\r\n            <NotificationCard key={invites[invite].groupId} acceptInvite={acceptInvite} deleteInvite={deleteInvite}\r\n              invite={invites[invite]} userId={authUser.uid}/>\r\n          ))}\r\n      </div>  \r\n\r\n      {error !== '' && <div className=\"bg-red-100 p-3 border-red-600 border rounded\"><p className=\"text-red-600 text-center\">\r\n          {error}</p></div>}  \r\n\r\n    </div>  \r\n    </>\r\n  );\r\n};\r\n\r\n\r\n\r\n\r\n","import React, { useContext } from 'react';\r\nimport { GlobalContext } from '../../context/GlobalState';\r\nimport { AddMemberModal } from './AddMemberModal';\r\nimport { CreateGroupModal } from './CreateGroupModal';\r\nimport { NotificationsModal } from './NotificationsModal';\r\n\r\nexport const ModalTemplate = () => {\r\n  const { renderStatus, setModal, setView } = useContext(GlobalContext); \r\n  \r\n  return (\r\n    <>\r\n    <div className=\"animated fadeIn modal fixed w-full h-full top-0 left-0 flex items-center justify-center\">\r\n      <div className=\"modal-overlay absolute w-full h-full bg-gray-800 opacity-75\"></div>\r\n\r\n      {/* Set varying modal size for different modals */}\r\n      <div className={ (renderStatus.modalView === 'NotificationsModal') ? \r\n        \"modal-container bg-gray-100 w-screen md:w-8/12 lg:w-8/12 mx-auto md:mb-32 rounded-md shadow-lg z-50 h-screen md:h-auto overflow-y-auto\"\r\n        : \"modal-container bg-gray-100 w-screen md:w-8/12 lg:w-6/12 xl:mb-32 mx-auto rounded-md shadow-lg z-50 h-screen md:h-auto overflow-y-auto\"}>\r\n                 \r\n        {/* Close Button in upper right corner of screen */}\r\n        <div onClick={(e) => setModal(false, e)} className=\"modal-close absolute top-0 right-0 cursor-pointer flex flex-col items-center mt-4 mr-4 text-white text-sm z-50\">\r\n          <svg className=\"fill-current text-white\" xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 18 18\">\r\n            <path d=\"M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z\"></path>\r\n          </svg>\r\n          <span className=\"text-sm\">(Esc)</span>\r\n        </div>\r\n\r\n        {renderStatus.modalView === 'AddMemberModal' && <AddMemberModal setModal={setModal} />}\r\n        {renderStatus.modalView === 'CreateGroupModal' && <CreateGroupModal setModal={setModal} />}\r\n        {renderStatus.modalView === 'NotificationsModal' && <NotificationsModal setModal={setModal} setView={setView} />}\r\n        \r\n      </div>\r\n    </div>\r\n    </>\r\n  )\r\n}","import React, { useContext, useState } from 'react';\r\nimport { GlobalContext } from '../../context/GlobalState';\r\nimport { auth, googleAuth, firestore, timestamp } from '../../config/Firebase';\r\nimport { generatePushID } from \"../../helpers/pushIdGenerator.js\";\r\nimport { demoGroup } from \"../../helpers/demoData.js\";\r\n\r\nexport const LandingPage = () => {\r\n  const { setView } = useContext(GlobalContext);\r\n  const [error, setError] = useState('');\r\n\r\n  const googleHandler = (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    auth.signInWithPopup(googleAuth).then( (returned) => {  \r\n      firestore.collection('Notifications').doc(returned.user.uid).set({ email: returned.user.email, displayName: returned.user.displayName }, { merge: true })  \r\n    }).catch( (error) => {\r\n      setError(error.message)\r\n    });\r\n  };\r\n\r\n  const formHandler = (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    const form = document.querySelector('#login-form');\r\n    const email = form['email'].value || ''; \r\n    const password = form['password'].value || '';   \r\n    auth.signInWithEmailAndPassword(email, password).then( (returned) => {\r\n      setView('MainAppView');\r\n    });\r\n  };\r\n\r\n  const demoHandler = (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    const generated = generatePushID();\r\n    const email = generated + '@demo-user.xxx';\r\n    const password = 'demopass';\r\n    const generatedGroupID = generatePushID();\r\n    const generatedInviteID = generatePushID();\r\n    const secondGeneratedInviteID = generatePushID();\r\n    const currentDate = timestamp.fromDate(new Date()).toDate();\r\n    auth.createUserWithEmailAndPassword(email, password).then(returned => {\r\n      if ( returned.user && returned.additionalUserInfo.isNewUser === true ){\r\n        firestore.collection(\"Users\").doc(returned.user.uid).set({ \r\n          demo: true,\r\n          displayName: 'DemoUser', \r\n          uid: returned.user.uid, \r\n          email, \r\n          selectedGroup: generatedGroupID\r\n        });      \r\n        returned.user.updateProfile({\r\n          displayName: 'DemoUser'\r\n        }).then( \r\n        firestore.collection(\"Groups\").doc(generatedGroupID).set(\r\n          demoGroup(auth.currentUser.uid, email, currentDate), {merge: true})\r\n        .then ( \r\n          firestore.collection(\"GroupsByUser\").doc(auth.currentUser.uid).set({\r\n            demo: true,\r\n            groups: {\r\n              [generatedGroupID]: {\r\n                groupId: generatedGroupID,\r\n                name: 'Trip to Paris',\r\n                creator: 'DemoUser',\r\n                creatorId: auth.currentUser.uid,\r\n                creatorMail: email,\r\n                createDate: currentDate,\r\n                lastActivity: currentDate\r\n              }\r\n            }        \r\n          }, {merge: true})   \r\n        ).then( firestore.collection('Notifications').doc(returned.user.uid).set({ \r\n            demo: true,\r\n            email, \r\n            displayName: 'DemoUser', \r\n            invites: {\r\n              [generatedInviteID]: {\r\n                groupName: 'Weekend in Milan',\r\n                creatorName: 'Kate',\r\n                creatorMail: 'kate@road-acc-demo.xxx',\r\n                createDate: currentDate,\r\n                groupId: generatedInviteID,\r\n                inviteDate: currentDate\r\n              }, [secondGeneratedInviteID]: {\r\n                groupName: 'Camping vacation',\r\n                creatorName: 'Harry',\r\n                creatorMail: 'harry@road-acc-demo.xxx',\r\n                createDate: currentDate,\r\n                groupId: secondGeneratedInviteID,\r\n                inviteDate: currentDate\r\n              }\r\n            }\r\n          }, {merge: true}))\r\n        .then( setView('MainAppView') ))\r\n      }\r\n    }).catch(error => {\r\n      setError(error.message)\r\n    });   \r\n  };\r\n\r\n  return (\r\n    <>\r\n        <div className=\"flex content-center items-center justify-center h-full animated fadeIn mb-10\">\r\n          <div className=\"w-full md:w-8/12 lg:w-5/12 xl:w-3/12 px-4 md:pt-32\">\r\n\r\n            <div className=\"relative flex flex-col min-w-0 break-words w-full mb-2 shadow-lg rounded-lg border-0\">\r\n              <div className=\"rounded-t mb-0 px-6 py-4\">\r\n                <div className=\"text-center mb-3\">\r\n                  <small className=\"text-gray-600 font-bold\">\r\n                    Log in with\r\n                  </small>\r\n                </div>\r\n                <div className=\"btn-wrapper text-center\">\r\n                  <button\r\n                    className=\"bg-white active:bg-gray-100 text-gray-800 font-normal px-4 py-2 rounded outline-none focus:outline-none mr-1 \r\n                     uppercase shadow hover:shadow-md inline-flex items-center font-bold text-xs\" onClick={(e) => googleHandler(e)} \r\n                    type=\"button\">\r\n                  <img\r\n                    alt=\"...\"\r\n                    className=\"w-5 mr-1\"\r\n                    src=\"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg\"/>\r\n                  Google\r\n                  </button>\r\n                </div>\r\n                <hr className=\"mt-6 border-b-1 border-gray-400\" />\r\n              </div>\r\n\r\n              <div className=\"flex-auto px-4 lg:px-10 py-6 pt-0\">\r\n                <div className=\"text-gray-600 text-center mb-3 font-bold\">\r\n                  <small>Or log in with your email</small>\r\n                </div>\r\n                <form id=\"login-form\" onSubmit={(e) => formHandler(e)}>\r\n                  <div className=\"relative w-full mb-3\">\r\n                    <label\r\n                      className=\"block uppercase text-gray-700 text-xs font-bold mb-2\"\r\n                      htmlFor=\"grid-password\">\r\n                      Email\r\n                    </label>\r\n                    <input\r\n                      type=\"email\" id=\"email\"\r\n                      className=\"px-3 py-3 placeholder-gray-400 text-gray-700 bg-white rounded text-sm shadow focus:outline-none focus:shadow-outline w-full\"\r\n                      placeholder=\"Email\"/>\r\n                  </div>\r\n                  <div className=\"relative w-full mb-3\">\r\n                    <label\r\n                      className=\"block uppercase text-gray-700 text-xs font-bold mb-2\"\r\n                      htmlFor=\"grid-password\">\r\n                      Password\r\n                    </label>\r\n                    <input\r\n                      type=\"password\" id=\"password\"\r\n                      className=\"px-3 py-3 placeholder-gray-400 text-gray-700 bg-white rounded text-sm shadow focus:outline-none focus:shadow-outline w-full\"\r\n                      placeholder=\"Password\"\r\n                    />\r\n                  </div>\r\n  \r\n                  {error !== '' && <div className=\"bg-red-100 p-3 border-red-600 border rounded\"><p className=\"text-red-600 text-center\">\r\n                    {error}</p></div>}     \r\n\r\n                  <div className=\"text-center mt-6\">\r\n                    <button\r\n                      className=\"bg-purple-600 hover:bg-purple-500 text-white active:bg-gray-700 text-sm font-bold uppercase px-6 py-3 rounded shadow \r\n                      hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 w-full\"\r\n                      type=\"submit\">\r\n                      Log In\r\n                    </button>\r\n                  </div>\r\n\r\n                </form>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex flex-wrap text-xl mt-6\">\r\n              <div className=\"w-1/2\">\r\n                <span onClick={(e) => setView('ForgotPassword', e)} className=\"text-gray-600 font-bold italic cursor-pointer\">\r\n                  <small>Forgot password?</small>\r\n                </span>\r\n              </div>\r\n              <div className=\"w-1/2 text-right\">\r\n                <span onClick={(e) => setView('CreateAccount', e)} className=\"text-gray-600 font-bold italic cursor-pointer\">\r\n                  <small>Create new account</small>\r\n                </span>\r\n              </div>   \r\n              <div className=\"w-full mt-4 text-center text-lg font-bold text-gray-600\"> Or </div>           \r\n            </div>\r\n                              \r\n            <div className=\"flex w-full text-center justify-center\">\r\n              <div onClick={ (e) => { demoHandler(e) } } className=\"w-3/6 md:w-8/12 items-center justify-center \r\n                py-3 mt-6 bg-green-500 rounded-lg shadow-lg border-2 border-gray-300 cursor-pointer hover:bg-green-400 hover:shadow-inner\">\r\n                <span className=\"text-white font-fira text-lg text-sm md:text-xl\">Log in as Demo user</span>\r\n              </div>\r\n            </div>\r\n\r\n          </div>\r\n        </div>\r\n    </>\r\n  );\r\n}","\r\nexport const demoGroup = (userId, email, timestamp) =>  {\r\n  const data = {\r\n    groupMembers: {\r\n      [userId]: {\r\n        color: 'green-500',\r\n        displayName: 'DemoUser',\r\n        email: email,\r\n        role: 'creator'\r\n      },\r\n      'demo-person-a1': {\r\n        color: 'teal-700',\r\n        displayName: 'Kate',\r\n        email: 'kate@road-acc-demo.xxx',\r\n        role: 'npc'\r\n      }, \r\n      'demo-person-a2': {\r\n        color: 'orange-800',\r\n        displayName: 'Harry',\r\n        email: 'harry@road-acc-demo.xxx',\r\n        role: 'npc'\r\n      },\r\n      'demo-person-a3': {\r\n        color: 'orange-800',\r\n        displayName: 'Edward',\r\n        email: 'edward@road-acc-demo.xxx',\r\n        role: 'npc'\r\n      }\r\n    },\r\n    creator: {\r\n      name: 'DemoUser',\r\n      email: email,\r\n      id: userId\r\n    },\r\n    createDate: timestamp,\r\n    demo: true,\r\n    lastActivity: timestamp,\r\n    lastSettled: null,\r\n    name: 'Trip to Paris',\r\n    transactions: {\r\n      [timestamp]: {\r\n        amount: 120.00,\r\n        desc: 'Had a nice dinner together!',\r\n        dividedAmount: 30.00, \r\n        payers: ['demo-person-a3'],\r\n        spenders: ['demo-person-a1', 'demo-person-a2', 'demo-person-a3', userId],\r\n        timestamp: timestamp,\r\n        type: 'expense'\r\n      }\r\n    }      \r\n  };\r\n  \r\n  return data\r\n\r\n};","import React, { useContext, useState } from 'react';\r\nimport { GlobalContext } from '../../context/GlobalState';\r\nimport { auth, firestore } from '../../config/Firebase';\r\n\r\nexport const CreateAccount = () => {\r\n  const { setView } = useContext(GlobalContext); \r\n  const [error, setError] = useState('');\r\n\r\n  const formHandler = (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    const form = document.querySelector('#create-account-form');\r\n    const nickname = form['nickname'].value || '';  \r\n    const email = form['email'].value || ''; \r\n    const password = form['password'].value || '';   \r\n\r\n    auth.createUserWithEmailAndPassword(email, password).then(returned => {\r\n      if(returned.user && returned.additionalUserInfo.isNewUser === true){\r\n        firestore.collection(\"Users\").doc(returned.user.uid).set({ \r\n          demo: false,\r\n          displayName: nickname, \r\n          uid: returned.user.uid, \r\n          email, selectedGroup: null\r\n        })      \r\n        returned.user.updateProfile({\r\n          displayName: nickname\r\n        }).then( firestore.collection('Notifications').doc(returned.user.uid).set({ \r\n          demo: false,\r\n          email, \r\n          displayName: nickname, \r\n          invites: null \r\n        }, {merge: true})\r\n        ).catch(error => {\r\n          setError(error.message)\r\n        })   \r\n      }\r\n    }).catch(error => {\r\n      setError(error.message)\r\n    })    \r\n  };\r\n\r\n  return (\r\n    <>\r\n    <div className=\"flex content-center items-center justify-center h-full animated fadeIn mb-10\">\r\n      <div className=\"w-full md:w-8/12 lg:w-3/12 px-4 pt-6 md:pt-32\">\r\n\r\n        <div className=\"relative flex flex-col min-w-0 break-words w-full mb-6 shadow-lg rounded-lg border-0\">\r\n\r\n          <div className=\"flex-auto px-4 lg:px-10 py-10 pt-0\">\r\n            <div className=\"text-gray-600 text-center mb-3 font-bold\">\r\n              <small>Create an account</small>\r\n            </div>\r\n            <form id=\"create-account-form\" onSubmit={(e) => formHandler(e)}>\r\n              <div className=\"relative w-full mb-3\">\r\n                <label\r\n                  className=\"block uppercase text-gray-700 text-xs font-bold mb-2\"\r\n                  htmlFor=\"nickname\">\r\n                  Nickname <span className=\"text-gray-700 normal-case italic opacity-50\">(Required, max. 12 characters)</span>\r\n                </label>\r\n                <input\r\n                  type=\"text\" id=\"nickname\" maxLength=\"12\" required\r\n                  className=\"px-3 py-3 placeholder-gray-400 text-gray-700 bg-white rounded text-sm shadow focus:outline-none focus:shadow-outline w-full\"\r\n                  placeholder=\"Nickname\"/>\r\n              </div>\r\n              <div className=\"relative w-full mb-3\">\r\n                <label\r\n                  className=\"block uppercase text-gray-700 text-xs font-bold mb-2\"\r\n                  htmlFor=\"email\">\r\n                  Email <span className=\"text-gray-700 normal-case italic opacity-50\">(Required)</span>\r\n                </label>\r\n                <input\r\n                  type=\"email\" id=\"email\" minLength=\"4\" maxLength=\"60\" required\r\n                  className=\"px-3 py-3 placeholder-gray-400 text-gray-700 bg-white rounded text-sm shadow focus:outline-none focus:shadow-outline w-full\"\r\n                  placeholder=\"Email\"/>\r\n              </div>\r\n              <div className=\"relative w-full mb-3\">\r\n                <label\r\n                  className=\"block uppercase text-gray-700 text-xs font-bold mb-2\"\r\n                  htmlFor=\"password\">\r\n                  Password <span className=\"text-gray-700 normal-case italic opacity-50\">(Required)</span>\r\n                </label>\r\n                <input\r\n                  type=\"password\" id=\"password\" minLength=\"6\" maxLength=\"16\" required\r\n                  className=\"px-3 py-3 placeholder-gray-400 text-gray-700 bg-white rounded text-sm shadow focus:outline-none focus:shadow-outline w-full\"\r\n                  placeholder=\"Password\"\r\n                />\r\n              </div>\r\n\r\n              {error !== '' && <div className=\"bg-red-100 p-3 border-red-600 border rounded\"><p className=\"text-red-600 text-center\">\r\n                {error}</p></div>}              \r\n\r\n              <div className=\"text-center mt-6\">\r\n                <button\r\n                  className=\"bg-purple-600 hover:bg-purple-500 text-white active:bg-gray-700 text-sm font-bold uppercase px-6 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 w-full\"\r\n                  type=\"submit\">\r\n                  Create Account\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex flex-wrap text-lg md:text-xl mt-6\">\r\n          <div className=\"w-2/3 md:w-1/2\">\r\n            <span onClick={(e) => setView('Landing', e)} className=\"text-gray-600 font-bold italic cursor-pointer\">\r\n              <small>&lt; Back to Login Screen</small>\r\n            </span>\r\n          </div>          \r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n    </>\r\n  );\r\n}","import React from 'react';\r\n\r\nexport const MemberBalance = ({ balance }) => {\r\n\r\n  return (\r\n    <>\r\n    <div className=\"relative flex w-3/4 md:w-3/5 my-2 flex-col items-center flex-shrink mx-1 border-t\">\r\n      <div className=\"flex justify-center bg-indigo-100 w-4/5 mt-2 shadow-md rounded text-center border border-gray-300\">\r\n        { ( balance === 0 )  && <span className=\"text-green-600 font-bold text-lg\">{balance.toFixed(0)}</span> }\r\n        { ( balance <0 ) && <span className=\"text-red-600 font-bold text-lg\">{balance.toFixed(2)}</span> }\r\n        { ( balance >0 ) && <span className=\"text-green-600 font-bold text-lg\">+{balance.toFixed(2)}</span> }\r\n      </div>\r\n    </div>\r\n    </>\r\n  )\r\n};","import React from 'react';\r\nimport { MemberBalance } from './MemberBalance';\r\n\r\nexport const MemberCard = React.memo(props => {\r\n\r\n  return (    \r\n    <>  \r\n    <div className=\"relative flex w-5/12 md:w-1/5 flex-col py-1 md:py-4 md:pb-1 my-2 items-center bg-white shadow-lg rounded flex-shrink mx-1\">\r\n      {props.member.role === 'creator' && <span className=\"absolute top-0 left-0 mt-1 ml-2 text-xs md:text-sm text-white md:text-green-600 font-bold\">Creator</span>}\r\n      <div className={\"hidden md:block rounded-full h-12 w-12 bg-\" + props.member.color + \" text-center\"}>\r\n        <h1 className=\"font-bold text-white text-2xl mt-1\">{props.member.displayName.slice(0, 1).toUpperCase()}</h1>            \r\n      </div>\r\n      <h1 aria-label={props.member.email} data-balloon-pos=\"down\" className={\"tooltip-grey font-bold text-lg md:text-xl my-auto text-\" + props.member.color + \"\"}>\r\n        {props.member.displayName}</h1>\r\n\r\n        <MemberBalance balance={props.balance} />\r\n    </div>      \r\n    </>\r\n  );\r\n});","import React, { useContext } from 'react';\r\nimport { GlobalContext } from '../context/GlobalState';\r\nimport { GroupListener } from '../context/GroupListener';\r\nimport { MemberCard } from './MemberCard';\r\n\r\nexport const MemberDisplay = ({ balances, groupTotals }) => {\r\n  const { currentGroup } = useContext(GroupListener);\r\n  const { setModal } = useContext(GlobalContext); \r\n  const members = currentGroup ? currentGroup.groupMembers : null;\r\n\r\n  return (\r\n    <>\r\n    <h4 className=\"animated fadeIn font-bold text-2xl text-center text-indigo-800 font-fira\">{currentGroup.name}</h4>\r\n    <h4 className=\"animated fadeIn italic font-bold text-gray-600 text-base text-center mt-4 font-fira\">Members and their pay balance</h4>\r\n    <div className=\"animated fadeIn w-full max-w-6xl mx-auto flex flex-wrap flex-column justify-center\">      \r\n\r\n      { members && Object.keys(members).map( (groupmember) => (\r\n        <MemberCard key={groupmember} id={groupmember} member={members[groupmember]} balance={balances ? balances[groupmember] : 0} />\r\n      ))}\r\n\r\n      {/* Add Button */}\r\n      <div onClick={(e) => setModal('AddMemberModal', e)} className=\"flex cursor-pointer w-5/12 md:w-1/5 flex-col py-2 md:py-4 my-2 \r\n      items-center bg-transparent border-2 border-gray-400 border-dashed rounded flex-shrink mx-1 hover:bg-indigo-200\" \r\n        aria-label=\"Add a member\" data-balloon-pos=\"down\" id=\"addButton\">\r\n        <div className=\"rounded md:rounded-full w-full h-full md:h-12 md:w-12 bg-purple-100 md:bg-purple-400 text-center\">\r\n          <h1 className=\"hidden md:block font-bold text-white text-3xl\">+</h1> \r\n          <h1 className=\"md:hidden font-bold text-purple-700 text-xl\">Add Member</h1>            \r\n        </div>\r\n        <h1 className=\"hidden md:inline tooltip-grey font-bold text-gray-600 text-xl md:text-2xl my-auto\">Click to add</h1>\r\n      </div>\r\n\r\n    </div>\r\n\r\n    <div className=\"w-full text-center my-2 pb-2 border-b\">\r\n\r\n      <div className=\"w-full\">\r\n        <span className=\"font-bold text-gray-600 text-xl italic\">Total expenses: Group | Average:  \r\n          <span className=\"text-red-300 not-italic\">{groupTotals && `  ${Math.floor(groupTotals.everything)}  |  ${Math.floor(groupTotals.average)} p.p.`}</span>\r\n        </span>\r\n      </div>\r\n\r\n      <div className=\"w-full\">\r\n        <span className=\"font-bold text-gray-600 text-xl italic\">Total since last settle: Group | Average:   \r\n          <span className=\"text-red-300 not-italic\">{groupTotals && `  ${Math.floor(groupTotals.everythingAfterSettle)} \r\n             |  ${Math.floor(groupTotals.averageAfterSettle)} p.p.`}</span>\r\n        </span>\r\n      </div>\r\n\r\n    </div>\r\n    </>\r\n  )\r\n};","import React, { useState, useEffect, useContext } from 'react';\nimport { settleCalculator } from '../helpers/settleCalculator';\nimport { generatePushID } from \"../helpers/pushIdGenerator.js\";\nimport { AuthContext } from '../context/AuthContext';\nimport { firestore, timestamp } from '../config/Firebase';\n\nexport const Settle = ({ groupId, groupMembers, creatorId, balances }) => {\n  const { authUser } = useContext(AuthContext); \n  const [settleOpen, setSettleOpen] = useState(false); \n  const [settles, setSettles] = useState(null); \n  const [settleConfirm, setSettleConfirm] = useState(null); \n  const [error, setError] = useState(null); \n  const [success, setSuccess] = useState(null); \n  const members = typeof groupMembers !== 'undefined' ? groupMembers : null;\n\n  const currentId = authUser ? authUser.uid : null;\n\n  const calcSettles = (balancesObj) => {\n    const results = settleCalculator(balancesObj); \n    setSettles(results);\n  }\n\n  const doSettle = () => {\n    const transactionId = generatePushID();\n    const time = timestamp.fromDate(new Date()).toDate();\n\n    // Execute firestore send of settle to transaction list\n    firestore.collection(\"Groups\").doc(groupId).set({\n      lastActivity: time,\n      lastSettled: time,\n      transactions: {\n        [transactionId]: {\n          amount: 0,\n          desc: 'Group did settlement!',\n          dividedAmount: 0, \n          payers: null,\n          spenders: null,\n          timestamp: time,\n          type: 'settlement'\n        }\n      }      \n    }, {merge: true}).then( () => {\n      setSettleOpen(false);\n      setSettles(null);\n      setSuccess('Success! Settled');   \n      console.log('did settle!');  \n      setTimeout(() => setSuccess(''), 3000);  \n    }).catch( (error) => {\n      setError(error.message)\n    });    \n  }     \n \n  useEffect(() => {\n    if (balances){\n      calcSettles(balances);\n    }\n  }, [balances, groupMembers]);\n\n  return (\n  <>\n  {/* When button is pushed and the settling display is open */}\n  { settleOpen && \n\n  <div className=\"relative flex w-11/12 md:w-8/12 flex-wrap justify-center items-center bg-white rounded-lg shadow py-2 text-center text-xl\">\n    <span className=\"w-9/12 text-gray-600 font-bold border-b mb-4\">Transfers to settle and set everyone at 0 debts</span>\n    <div onClick={(e) => setSettleOpen(false)} className=\"absolute top-0 right-0 mb-3 px-3 py-1 bg-red-600 cursor-pointer font-bold text-xl \n          text-white rounded-lg hover:bg-red-500 shadow border border-gray-200\">\n            X\n    </div>\n    {settles && members && settles.map( (transfer, key) => (\n      <div key={key} className=\"w-full text-gray-700 font-bold\">\n        <span className={\"text-\" + groupMembers[transfer.from].color + \" \"}>{groupMembers[transfer.from].displayName}</span>\n        <span className=\"text-gray-700\"> sends to </span>\n        <span className={\"text-\" + groupMembers[transfer.to].color + \" \"}>{groupMembers[transfer.to].displayName}</span>\n        <span className=\"text-gray-700\">: </span>\n        <span className=\"text-gray-700\">{transfer.amount.toFixed(2)}</span> \n      </div>\n    ))}    \n    { (currentId !== creatorId) && <span className=\"w-9/12 text-base italic text-gray-500 font-bold border-t my-6\">\n      Your group creator can confirm settlement to reset the balances to 0 but keep the group and expense history.</span> \n    }     \n    {/* When creator is viewing the group, can confirm settlement and reset the balances */}\n    { (currentId === creatorId) && \n      <>\n      <span className=\"w-9/12 text-base italic text-gray-500 font-bold border-t my-6\">\n      Confirm settlement has been done by members? This will reset the balances to 0 but keep the group and expense history.</span>\n      <div onClick={ () => setSettleConfirm(!settleConfirm) } \n        className=\"w-4/6 md:w-5/12 text-center py-3 mb-4 bg-green-500 rounded-lg shadow-lg border-2 border-gray-300 \n        cursor-pointer hover:bg-green-400 hover:shadow-inner\">\n        <span className=\"text-white text-lg md:text-2xl\">Confirm Settlement</span>\n      </div> \n      { settleConfirm && \n      <div className=\"flex flex-wrap w-full p-3 w-8/12 bg-red-200 text-bold justify-center items-center text-center rounded-lg text-xl\">\n        <h1 className={\"w-full font-bold text-red-700 text-lg md:text-lg mb-4\"}>Are you sure you want to settle and reset?</h1>\n        <div onClick={() => setSettleConfirm(false)} \n          className=\"block mx-2 w-5/12 bg-red-600 p-2 rounded-lg text-white focus:outline-none cursor-pointer shadow hover:shadow-inner \n            border border-transparent hover:border-red-700\">Cancel</div>\n        <div onClick={() => doSettle()}   \n          className=\"block mx-2 w-2/12 bg-indigo-800 p-2 rounded-lg text-white focus:outline-none cursor-pointer shadow hover:shadow-inner \n            border border-transparent hover:border-indigo-900\">&#10003;\n        </div>\n      </div>\n      }\n      </>\n    }    \n\n  </div>}\n    {/* Success alert */}    \n    {success && <div id=\"settle-success-bar\" \n      className=\"flex w-full mt-6 h-16 bg-green-100 p-3 border-green-600 border rounded items-center justify-center animated\">\n      <p className=\"text-green-600\">{success}</p></div>}   \n    {error && <div className=\"flex w-full my-4 h-16 bg-red-100 p-3 border-red-600 border rounded items-center justify-center\">\n      <p className=\"text-red-600\">{error}</p></div>}   \n\n    {/* The Big Settle Button */}\n  <div className=\"flex w-full text-center justify-center\">\n    <div onClick={ (e) => { setSettleOpen(true) } } className=\"w-3/6 md:w-3/12 items-center justify-center \n      py-3 mt-4 bg-green-500 rounded-lg shadow-lg border-2 border-gray-300 cursor-pointer hover:bg-green-400 hover:shadow-inner\">\n      <span className=\"text-white font-fira text-lg md:text-xl\">Settle All Differences</span>\n    </div>\n  </div>\n  </>\n  )\n}\n","export const settleCalculator = (balances) => {\r\n    if (!balances) throw new Error('Error: Can not find balances in settle calculator!');\r\n\r\n    let settles = [];\r\n    const people = Object.keys(balances);\r\n    const valuesPaid = Object.values(balances);\r\n    const sum = valuesPaid.reduce((acc, curr) => curr + acc); \r\n    const mean = sum / people.length;\r\n\r\n    const sortedPeople = people.sort((personA, personB) => balances[personA] - balances[personB]);\r\n    const sortedValuesPaid = sortedPeople.map((person) => balances[person] - mean);\r\n\r\n    let i = 0;\r\n    let j = sortedPeople.length - 1;\r\n    let debt;\r\n\r\n    while (i < j) {\r\n      debt = Math.min(-(sortedValuesPaid[i]), sortedValuesPaid[j]);\r\n      sortedValuesPaid[i] += debt;\r\n      sortedValuesPaid[j] -= debt;\r\n\r\n      // Filling the results array \"settles\" with transaction objects\r\n      if (debt > 0.03) {\r\n        settles.push({\r\n          from: sortedPeople[i],\r\n          amount: debt,\r\n          to: sortedPeople[j]\r\n        });\r\n      } \r\n      \r\n      if (sortedValuesPaid[i] === 0) {\r\n        i++;\r\n      }\r\n\r\n      if (sortedValuesPaid[j] === 0) {\r\n        j--;\r\n      }\r\n    }\r\n\r\n    return settles;\r\n}","import React from 'react';\r\n\r\nexport const SpenderCheckbox = ({ memberId, displayName }) => {\r\n  \r\n  return (\r\n    <>\r\n    <div className=\"mx-4 text-lg flex items-center content-center\">\r\n      <input type=\"checkbox\" className=\"h-6 w-6 spend-checkbox\" defaultChecked={true} \r\n        value={memberId} name=\"spenders\" id={\"spender-\" + memberId} />  \r\n      <label className=\"ml-2\">{displayName}</label>         \r\n    </div>\r\n    </>\r\n  )\r\n}\r\n\r\n\r\n\r\n\r\n\r\n","import React from 'react';\r\n\r\nexport const PayerCheckbox = ({ memberId, displayName, authId }) => {\r\n  \r\n  return (\r\n    <>\r\n    <div className=\"mx-4 text-lg flex items-center content-center\">      \r\n      <input type=\"radio\" value={memberId} name=\"payers\" id={\"payer-\" + memberId} className=\"h-6 w-6 pay-checkbox\"\r\n        defaultChecked={ (authId === memberId) ? true : false }/> \r\n      <label className=\"ml-2\">{displayName}</label>    \r\n    </div>\r\n    </>\r\n  )\r\n}\r\n\r\n\r\n\r\n\r\n","import React, {useState, useContext } from 'react'\nimport { AuthContext } from '../../context/AuthContext';\nimport { GroupListener } from '../../context/GroupListener';\nimport { firestore, timestamp } from '../../config/Firebase';\nimport { generatePushID } from \"../../helpers/pushIdGenerator.js\";\nimport { SpenderCheckbox } from \"./SpenderCheckbox.js\";\nimport { PayerCheckbox } from \"./PayerCheckbox.js\";\n\nexport const AddTransaction = () => {\n  const { authUser } = useContext(AuthContext);\n  const { currentGroup } = useContext(GroupListener);\n  const [text, setText] = useState('');\n  const [amount, setAmount] = useState('');\n  const [submitting, setSubmitting] = useState(false);\n  const [windowOpen, setWindowOpen] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n\n  const members = currentGroup ? currentGroup.groupMembers : null;\n  \n  const onAdd = e => {\n    e.preventDefault();\n    setSubmitting(true);    \n    let spenders = [];\n    let payers = [];\n    let dividedAmount = null;\n    let transactionId = generatePushID();\n    let time = timestamp.fromDate(new Date()).toDate();\n    const spendCheckboxes = document.querySelectorAll('.spend-checkbox');\n    const payCheckboxes = document.querySelectorAll('.pay-checkbox');\n\n    spendCheckboxes.forEach( (checkbox) => {\n      checkbox.checked && spenders.push(checkbox.value);\n    });\n    payCheckboxes.forEach( (checkbox) => {\n      checkbox.checked && payers.push(checkbox.value);\n    });\n\n    // Check for incorrect inputs, otherwise move on to update Firestore DB\n    if ( (text === '') || (amount === '') ) {\n      setError('Please fill in an amount and a description.')\n      setSubmitting(false);\n      return null;\n    } else if (!spenders.length || !payers.length) {\n      setError('Please fill in both who paid the expense and who participated.')\n      setSubmitting(false);\n      return null;\n    } else {\n      dividedAmount = Math.abs(amount / spenders.length).toFixed(2);\n\n      // Execute firestore send of transaction\n      firestore.collection(\"Groups\").doc(currentGroup.groupId).set({\n        lastActivity: time,\n        transactions: {\n          [transactionId]: {\n            amount: Math.abs(amount).toFixed(2),\n            desc: text,\n            dividedAmount: dividedAmount, \n            payers: payers,\n            spenders: spenders,\n            timestamp: time,\n            type: 'expense'\n          }\n        }      \n      }, {merge: true}).then( () => {\n        setAmount('');    \n        setText('')  \n        setSubmitting(false);\n        setWindowOpen(false);\n        setSuccess('Success! Added \"' + text + '\"');      \n        setTimeout(() => setSuccess(''), 3000);  \n      }).catch( (error) => {\n        setError(error.message)\n        setSubmitting(false);\n      });    \n    }     \n  }\n\n  return (\n    <>\n    {success !== '' && <div id=\"transaction-success-bar\" \n      className=\"flex w-full mt-6 h-16 bg-green-100 p-3 border-green-600 border rounded items-center justify-center animated\">\n      <p className=\"text-green-600\">{success}</p></div>}   \n\n    <div className={((windowOpen && !submitting) ? \"\" : \"hidden \") + \"w-full animated fadeIn slow\"}>\n      <div className=\"w-full flex justify-between items-end\">\n        <h3 className=\"font-bold font-fira text-lg text-indigo-500 w-2/3\">Add new group expense</h3>\n        <div onClick={(e) => setWindowOpen(false)} className=\"mb-3 px-3 py-1 bg-red-600 cursor-pointer font-bold text-xl \n          text-white rounded-lg hover:bg-red-500 shadow border border-gray-200\">\n            X\n        </div>\n      </div>\n\n      {error !== '' && <div className=\"flex w-full my-4 h-16 bg-red-100 p-3 border-red-600 border rounded items-center justify-center\">\n        <p className=\"text-red-600\">{error}</p></div>}   \n\n      <form onSubmit={!submitting ? onAdd : () => {}} id=\"add-form\" className=\"font-fira\">\n        <div className=\"form-control\">\n          <label htmlFor=\"amount\">Amount</label>\n          <input type=\"number\" min=\"0\" step=\"0.01\" value={amount} onChange={(e) => setAmount(e.target.value)} placeholder=\"Number amount...\" \n            required max=\"999999\" />\n        </div>\n        <div className=\"form-control\">\n          <label htmlFor=\"text\">Description of expense</label>\n          <input type=\"text\" value={text} onChange={(e) => setText(e.target.value)} placeholder=\"Text description here...\" \n            required minLength=\"3\" maxLength=\"150\" />\n        </div>\n        <h1 className=\"mt-6 italic text-center\">Who participated in this expense? Check name(s), expense will be split among those</h1>\n        <div className=\"flex items-center content-center flex-wrap mb-4 justify-center\">\n          {members && Object.keys(members).map( member => (  \n            <SpenderCheckbox key={member} memberId={member} displayName={members[member].displayName} />\n          ))}\n        </div>        \n        <h1 className=\"mt-3 italic text-center\">Who paid for it this time?</h1>\n        <div className=\"flex items-center content-center flex-wrap mb-8 justify-center\">\n          {members && Object.keys(members).map( member => (  \n            <PayerCheckbox key={member} memberId={member} displayName={members[member].displayName} authId={authUser.uid} />\n          ))}\n        </div>   \n        {error !== '' && <div className=\"flex w-full my-4 h-16 bg-red-100 p-3 border-red-600 border rounded mt-2  items-center justify-center\">\n          <p className=\"text-red-600\">{error}</p></div>}   \n        <button type=\"submit\"\n          className=\"block mx-auto mt-4 w-1/2 px-4 bg-indigo-700 p-3 rounded-lg text-white hover:bg-indigo-600 focus:outline-none shadow border border-gray-200\">\n          Add it!</button>\n      </form>\n    </div>\n\n    <div className=\"w-full font-fira\">\n      {windowOpen ? null : <button onClick={(e) => {e.preventDefault(); setWindowOpen(true)}} \n        className=\"block mx-auto mt-8 mb-3 w-1/2 px-4 bg-indigo-700 p-3 rounded-lg text-white hover:bg-indigo-600 focus:outline-none\n        shadow border border-gray-200\">Add Expense</button>}\n      {/* Possibly to add later */}\n      {/* <button className=\"block mx-auto mt-3 mb-6 w-1/2 px-4 bg-blue-500 p-3 rounded-lg text-white hover:bg-blue-400 focus:outline-none\n        shadow border border-gray-200\"><span role=\"img\" aria-label=\"fuel-icon\">&#9981;</span>  Fuel Cost Tool</button> */}\n    </div>\n    </>\n  )\n}\n","import React, { useState} from 'react';\n\nexport const Transaction = ({ transaction, id, deleteTransaction, members, creatorId, authId, timestamp }) => {\n  const [confirmAlert, setConfirmAlert] = useState(false);\n  const date = transaction.timestamp.toDate().toLocaleDateString();\n  const groupMemberCount = Object.keys(members).length || 0;\n  const floatAmount = parseFloat(transaction.amount);\n  const amount = Number.isInteger(floatAmount) ? parseInt(floatAmount) : floatAmount.toFixed(2);\n  let isCreator = authId ? (creatorId === authId) ? true : false : false;\n  let spenderArr = [];\n  let payerInfo = {};\n  const settlement = transaction && transaction.type === 'settlement' ? true : false;\n\n\n  transaction && (typeof transaction.spenders !== 'undefined') && transaction.spenders && transaction.spenders.map( spender => { \n    return spenderArr.push(members[spender].displayName || 'Unknown') \n  }); \n  const spenderNames = spenderArr.join(', ');\n  \n  transaction && (typeof transaction.payers !== 'undefined') && transaction.payers && transaction.payers.forEach( payer => { \n    payerInfo.displayName = members[payer].displayName || 'Unknown';\n    payerInfo.color = members[payer].color || 'gray-800';\n  });\n\n\n  return (\n    <>\n    <li className={\"relative rounded-sm flex w-full flex-wrap justify-between items-center p-2 my-2 bg-white shadow text-gray-800 border-l-4 border-r-4 border-red-300 \"\n        + (confirmAlert && \" bg-red-100 shadow-inner \") + (settlement && \" bg-green-300 border-green-500 \")}>\n      {/* Amount & Desc */}\n      <div className=\"flex justify-left w-full lg:w-2/4 items-center\">\n        {transaction.type === 'expense' && <span className=\"text-red-600 w-3/12 lg:w-2/12 p-2 bg-red-100 rounded-lg\">{amount}</span>}\n        <span className=\"w-10/12 ml-2\">{transaction.desc}</span>\n      </div>\n      {/* Date & Spenders */}\n      <div className=\"flex flex-wrap justify-center my-3 lg:my-0 lg:justify-end text-center lg:text-right w-full lg:w-2/4 items-center\">\n        <div className=\"w-full lg:w-11/12\">\n          <span className=\"ml-1 italic\">{spenderArr.length === groupMemberCount ? \"Group\" : spenderNames}</span>\n          <span className=\"ml-1 text-gray-600\">| {date} |</span>\n          <span className={\"text-\" + payerInfo.color + \" ml-1 text-center\"}>{payerInfo.displayName}</span>\n          {!settlement && <img className=\"hidden lg:inline mr-1\" width=\"32\" height=\"32\" src=\"img/wallet-icon.png\" alt=\"Wallet Icon\" />}\n        </div>\n        {/* Delete button on large screens */}\n        {isCreator && <span onClick={() => setConfirmAlert(true)} \n        className=\"w-1/3 md:w-1/5 lg:w-1/12 cursor-pointer bg-red-500 text-white text-center \n          text-lg font-bold rounded p-2 mt-2 lg:mt-0 hover:bg-red-400\">X</span> }     \n      </div>               \n    </li>\n\n    <div className={\"flex flex-wrap w-full p-3 w-8/12 bg-red-200 text-bold justify-center items-center text-center rounded-lg text-xl \" + ( confirmAlert ? \"\" : \"hidden\") + \" \"}>\n      <h1 className={\"w-full font-bold text-red-700 text-lg md:text-lg mb-4\"}>Are you sure you want to delete this expense? ({transaction.amount})</h1>\n      <div onClick={() => setConfirmAlert(false)} \n        className=\"block mx-2 w-5/12 bg-red-600 p-2 rounded-lg text-white focus:outline-none cursor-pointer shadow hover:shadow-inner \n          border border-transparent hover:border-red-700\">Cancel</div>\n      <div onClick={() => deleteTransaction(id)}   \n        className=\"block mx-2 w-2/12 bg-indigo-800 p-2 rounded-lg text-white focus:outline-none cursor-pointer shadow hover:shadow-inner \n          border border-transparent hover:border-indigo-900\">&#10003;\n      </div>\n    </div>\n    </>\n  )\n}\n","import React, { useContext } from 'react';\nimport { Transaction } from './Transaction';\nimport { GroupListener } from '../../context/GroupListener';\nimport { AuthContext } from '../../context/AuthContext';\nimport { firestore, fieldValue } from '../../config/Firebase';\n\nexport const TransactionList = () => {\n  const { currentGroup } = useContext(GroupListener);\n  const { authUser } = useContext(AuthContext);\n  const members = currentGroup.groupMembers || null;\n  const creatorId = currentGroup.creator.id;\n  const transactionsObj = currentGroup.transactions || null;\n  let transactions = [];\n  transactionsObj && Object.keys(transactionsObj).map( transaction => (\n    transactions.push({\n      ...transactionsObj[transaction], \n      id: transaction\n    })\n  ));   \n  let sorted = transactions.length ? transactions.sort((a, b) => b.timestamp.seconds - a.timestamp.seconds) : [];\n\n  const deleteTransaction = (id, e = '') => {\n    (e !== '') && e.preventDefault();\n    firestore.collection('Groups').doc(currentGroup.groupId).set({ \n      transactions: {\n        [id]: fieldValue.delete()\n      }\n    }, { merge: true }).catch( (error) => {\n      console.log(error)\n    });     \n  };\n  \n  return (\n    <div className=\"w-screen mb-12 pb-4 px-1 font-fira overflow-x-hidden overflow-y-auto scrollable border-b border-gray-400\" id=\"transactionlist\">\n      <h3 className=\"border-b border-gray-400 mb-4\">History</h3>\n      <ul className=\"list-none w-full\">\n        {sorted.length ? sorted.map((transaction) => (\n          <Transaction key={transaction.id} id={transaction.id} transaction={transaction} timestamp={transaction.timestamp} \n            members={members} creatorId={creatorId} authId={authUser.uid} deleteTransaction={deleteTransaction}/> \n         )) : <li className=\"p-2 my-2 bg-white shadow-md text-gray-800\">No Transactions yet!</li>}\n      </ul>\n    </div>\n  )\n}\n","import React, { useContext, useEffect, useState } from 'react';\r\nimport { GroupListener } from '../../context/GroupListener';\r\nimport { MemberDisplay } from '../MemberDisplay';\r\nimport { Settle } from '../Settle';\r\nimport { AddTransaction } from '../transactions/AddTransaction';\r\nimport { TransactionList } from '../transactions/TransactionList';\r\n\r\nexport const MainAppView = () => {\r\n  const { currentGroup } = useContext(GroupListener);\r\n  const groupId = currentGroup ? currentGroup.groupId : null;\r\n  const groupMembers = currentGroup ? currentGroup.groupMembers : null;\r\n  const creatorId =  currentGroup ? currentGroup.creator.id : null;\r\n  const transactions = currentGroup ? currentGroup.transactions : null;\r\n  const lastSettle = currentGroup ? currentGroup.lastSettled : null;\r\n  const [balances, setBalances] = useState(null);\r\n  const [totals, setTotals] = useState(null);\r\n\r\n\r\n  const calcBalances = ( memberObject, transactionsObject, lastSettle ) => {\r\n    if (!memberObject || !transactionsObject) {\r\n      setBalances(null)\r\n      return\r\n    }          \r\n    // See if last transaction is a settlement, then skip all calcs. \r\n    const lastKey = Object.keys(transactionsObject).length-1;\r\n    const last = Object.values(transactionsObject)[lastKey];\r\n    const settledUp = last.type === 'settlement' ? true : false;\r\n    if (settledUp) {\r\n      setBalances(null)\r\n      return\r\n    }\r\n    // initialize balances obj: for each member Id zero balance\r\n    const memberCount = Object.keys(memberObject).length;\r\n    let initBalances = {};\r\n    let transactionsByMember = {};\r\n    Object.keys(memberObject).forEach( member => {\r\n      initBalances[member] = 0;\r\n      transactionsByMember[member] = [];\r\n    });  \r\n    let calcedTotals = {\r\n      everything: 0.00,\r\n      average: 0.00,\r\n      everythingAfterSettle: 0.00,\r\n      averageAfterSettle: 0.00\r\n    };\r\n\r\n    // Loop through the transactions to calc balances\r\n    ( (transactionsObject !== null || '') && typeof transactionsObject !== 'undefined') && Object.keys(transactionsObject).forEach( item => {    \r\n      let transaction = transactions[item]; \r\n      calcedTotals.everything += Math.abs(-transaction.amount);\r\n      calcedTotals.average += (transaction.amount / memberCount);\r\n      if (transaction.timestamp > lastSettle) {\r\n        calcedTotals.everythingAfterSettle += Math.abs(-transaction.amount);\r\n        calcedTotals.averageAfterSettle += (transaction.amount / memberCount);\r\n        let spenders = typeof transaction.spenders !== 'undefined' ? transaction.spenders : null;    \r\n        let payers = typeof transaction.payers !== 'undefined' ? transaction.payers : null;   \r\n        spenders && spenders.forEach( spender => {\r\n          transactionsByMember[spender].push(-transaction.dividedAmount);\r\n        });\r\n        payers && payers.forEach( payer => {\r\n          transactionsByMember[payer].push(+transaction.amount);\r\n        });\r\n      }\r\n    });\r\n    Object.keys(transactionsByMember).forEach( memberId => {\r\n      let individualArr = transactionsByMember[memberId];\r\n      let total = individualArr.reduce( (acc, current) => (acc += current), 0 );\r\n      initBalances[memberId] = total;\r\n    });\r\n    setTotals(calcedTotals);\r\n    setBalances(initBalances);\r\n    return;\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (groupMembers) {      \r\n      calcBalances(currentGroup.groupMembers, transactions, lastSettle);  \r\n    };          \r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [transactions, groupMembers]);\r\n\r\n  return (\r\n    <>\r\n    {currentGroup && <MemberDisplay balances={balances} groupTotals={totals} />}      \r\n    <div className=\"animated fadeIn w-11/12 md:w-9/12 lg:w-6/12 mx-auto flex flex-wrap flex-column content-center justify-center\">\r\n      {currentGroup && <Settle balances={balances} groupId={groupId} groupMembers={groupMembers} creatorId={creatorId} />} \r\n      {currentGroup && <AddTransaction />} \r\n      {currentGroup && <TransactionList />}       \r\n    </div>\r\n    </>\r\n  )\r\n}","import React, { useState } from 'react';\r\n\r\nexport const GroupCard = React.memo(props => {\r\n  const [confirmAlert, setConfirmAlert] = useState(false);\r\n  const group = props.group;\r\n  const userId = props.userId || null; \r\n  let isCreator = userId ? (group.creatorId === userId) ? true : false : false;\r\n \r\n  return (   \r\n    <>   \r\n    <div className=\"relative flex w-full pt-4 pb-5 md:pb-1 my-2 justify-between bg-white shadow-md rounded flex-shrink mx-1\r\n      hover:bg-indigo-100 hover:shadow-xl border-2 border-transparent hover:border-indigo-200 focus:bg-indigo-100 focus:shadow-xl\">\r\n\r\n      <div className=\"absolute top-0 mx-auto h-full w-1/5\">\r\n\r\n        <span onClick={(e) => props.selectGroup(group.groupId, e)}\r\n          className=\"block cursor-pointer text-xs md:text-sm text-green-600 font-bold\">\r\n          Creator: { (group.creatorId === userId) ? 'You' : group.creator } </span>\r\n\r\n        <span onClick={(e) => props.selectGroup(group.groupId, e)}\r\n          className=\"block cursor-pointer text-xs text-blue-800 font-bold\">\r\n          Created on: </span>\r\n\r\n        <span onClick={(e) => props.selectGroup(group.groupId, e)}\r\n          className=\"block cursor-pointer text-xs text-blue-800 font-bold\">\r\n          { group.createDate.toDate().toLocaleDateString() } </span>\r\n\r\n      </div>\r\n\r\n\r\n      <div onClick={(e) => props.selectGroup(group.groupId, e)} className=\"mx-auto w-4/5 h-12 text-center cursor-pointer\">\r\n        <p className=\"font-bold text-indigo-800 text-sm md:text-xl\">{group.name}</p>            \r\n      </div>\r\n      {isCreator && \r\n      <div onClick={() => setConfirmAlert(!confirmAlert)} className=\"absolute right-0 bottom-0 mr-2 mb-6 md:mb-3 rounded-lg bg-red-200 py-2 px-2 mb-3 hover:bg-red-700 text-red-400 hover:text-white\">\r\n        <p className={\"font-bold text-sm md:text-lg cursor-pointer\"}>Delete</p>\r\n      </div>}\r\n    </div>\r\n\r\n    <div className={\"flex flex-column h-auto p-3 w-11/12 bg-red-200 text-bold flex-wrap justify-center text-center rounded-lg text-xl \" + ( confirmAlert ? \"\" : \"hidden\") + \" \"}>\r\n      <h1 className={\"w-full block font-bold text-red-700 text-lg md:text-lg mb-4\"}>Are you sure you want to delete group: {group.name}?</h1>\r\n      <h1 className={\"w-full block font-bold text-red-700 text-lg md:text-lg mb-4\"}>(Warning: This deletes it for all group members)</h1>\r\n      <div onClick={() => setConfirmAlert(false)} \r\n        className=\"block mx-2 w-5/12 bg-red-600 p-2 rounded-lg text-white focus:outline-none cursor-pointer shadow hover:shadow-inner \r\n          border border-transparent hover:border-red-700\">Cancel</div>\r\n      <div onClick={(e) => props.deleteGroup(group.groupId, e)}  \r\n        className=\"block mx-2 w-2/12 bg-indigo-800 p-2 rounded-lg text-white focus:outline-none cursor-pointer shadow hover:shadow-inner \r\n          border border-transparent hover:border-indigo-900\">&#10003;</div>\r\n    </div>\r\n    </>\r\n  );\r\n});\r\n\r\n\r\n\r\n\r\n","import React, { useContext, useState, useEffect } from 'react';\r\nimport { firestore, fieldValue } from '../../config/Firebase';\r\nimport { AuthContext } from '../../context/AuthContext';\r\nimport { GlobalContext } from '../../context/GlobalState';\r\nimport { LoadingScreen } from \"./LoadingScreen.js\";\r\nimport { GroupCard } from \"../GroupCard.js\";\r\n\r\nexport const GroupSelect = () => {\r\n  const { authUser } = useContext(AuthContext);\r\n  const [groupArray, setGroupArray] = useState(null);\r\n  const [loadingGroups, setLoadingGroups] = useState(true);  \r\n  const { setView, setModal } = useContext(GlobalContext);\r\n\r\n  const selectGroup = (id, e = '') => {\r\n    if (e !== '') {\r\n      e.preventDefault();\r\n    }\r\n    if (authUser.selectedGroup !== id) { \r\n      firestore.collection('Users').doc(authUser.uid).update({\r\n        selectedGroup: id\r\n      }).catch( (error) => {\r\n        console.log(error);\r\n      })       \r\n    } \r\n    setView('MainAppView') \r\n  };\r\n\r\n  const deleteGroup = (id, e = '') => {\r\n    (e !== '') && e.preventDefault();\r\n    if (id === authUser.selectedGroup) {\r\n      firestore.collection('Users').doc(authUser.uid).update({ selectedGroup: null }).catch( (error) => { console.log(error) })\r\n    }      \r\n    firestore.collection('Groups').doc(id).delete().then( () => {\r\n      firestore.collection(\"GroupsByUser\").doc(authUser.uid).set({ \r\n        groups: {\r\n          [id]: fieldValue.delete()\r\n        }\r\n      }, { merge: true });\r\n      setGroupArray( groupArray.filter( group => group.groupId !== id) )\r\n    }).catch( (error) => {\r\n      console.log(error)\r\n    });     \r\n  };\r\n\r\n  const getGroups = (authUser) => {\r\n    if (authUser) {\r\n      let returned = [];\r\n      let groupIds = [];\r\n      firestore.collection(\"GroupsByUser\").doc(authUser.uid).get().then( doc => {\r\n        let groups = doc.data() ? doc.data().groups : null;\r\n        if (groups) {\r\n          Object.keys(groups).map( (groupId) => {\r\n            returned.push(groups[groupId])\r\n            return groupIds.push([groupId])\r\n          });  \r\n          returned.sort((a, b) => {\r\n            return b.createDate - a.createDate;\r\n          });\r\n        }      \r\n        returned.length >= 1 ? setGroupArray(returned) : setGroupArray(null);\r\n        setLoadingGroups(false);\r\n      }).catch( (error) => {\r\n        console.log(error);\r\n      });\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    authUser && getGroups(authUser);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  if (loadingGroups) {\r\n    return <LoadingScreen />\r\n  }\r\n\r\n  return (\r\n    <>\r\n    <div className=\"animated fadeIn w-11/12 md:w-8/12 lg:w-4/12 mx-auto mt-8 flex flex-wrap flex-column content-center justify-center\">\r\n      <h1 className=\"text-center block w-full text-bold text-indigo-800 text-2xl\">{ groupArray ? 'Your Groups' : 'No Groups yet. Create one first!'}</h1> \r\n\r\n    {/* Create a group Button */}\r\n    <div className=\"relative flex w-8/12 pt-4 pb-5 md:pb-1 my-4 items-center bg-indigo-800 shadow-lg rounded-lg flex-shrink mx-1\">\r\n      <div onClick={ (e) => setModal('CreateGroupModal', e)} className=\"block h-12 w-full text-center cursor-pointer\">\r\n        <h1 className=\"font-bold text-white text-sm md:text-xl mt-1 shadow-lg\">CREATE NEW GROUP</h1>            \r\n      </div>\r\n    </div>\r\n\r\n    {/* Group Cards */}\r\n    { groupArray && groupArray.map( (group) => (\r\n        <GroupCard key={group.groupId} selectGroup={selectGroup} deleteGroup={deleteGroup}\r\n          group={group} userId={authUser.uid}/>\r\n    ))}\r\n    </div>   \r\n    </>\r\n  )\r\n};\r\n\r\n","import React, { useContext, useState } from 'react';\r\nimport { GlobalContext } from '../../context/GlobalState';\r\nimport { auth } from '../../config/Firebase';\r\n\r\nexport const ForgotPassword = () => {\r\n  const { setView } = useContext(GlobalContext); \r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState(null);\r\n\r\n  const formHandler = (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    const form = document.querySelector('#password-reset-form');\r\n    const email = form['email'].value || ''; \r\n\r\n    auth.sendPasswordResetEmail(email).then(returned => {\r\n      setSuccess('Password reset email sent! Please check your mailbox.');\r\n    }).catch(error => {\r\n      setError(error.message)\r\n    })    \r\n  };\r\n\r\n  return (\r\n    <>\r\n    <div className=\"flex content-center items-center justify-center h-full animated fadeIn mb-10\">\r\n      <div className=\"w-full md:w-8/12 lg:w-3/12 px-4 pt-6 md:pt-32\">\r\n\r\n        <div className=\"relative flex flex-col min-w-0 break-words w-full mb-6 shadow-lg rounded-lg border-0\">\r\n\r\n          <div className=\"flex-auto px-4 lg:px-10 py-10 pt-0\">\r\n            <div className=\"text-gray-600 text-center mb-3 font-bold\">\r\n              <small>Send yourself a mail with a new password</small>\r\n            </div>\r\n            <form id=\"password-reset-form\" onSubmit={(e) => formHandler(e)}>\r\n              <div className=\"relative w-full mb-3\">\r\n                <label\r\n                  className=\"block uppercase text-gray-700 text-xs font-bold mb-2\"\r\n                  htmlFor=\"email\">\r\n                  Email \r\n                </label>\r\n                <input\r\n                  type=\"email\" id=\"email\" minLength=\"4\" maxLength=\"60\" required\r\n                  className=\"px-3 py-3 placeholder-gray-400 text-gray-700 bg-white rounded text-sm shadow focus:outline-none focus:shadow-outline w-full\"\r\n                  placeholder=\"Email\"/>\r\n              </div>\r\n\r\n              {success && <div className=\"bg-green-100 p-3 border-green-600 border rounded\"><p className=\"text-green-600 text-center\">\r\n                {success}</p></div>}  \r\n\r\n              {error !== '' && <div className=\"bg-red-100 p-3 border-red-600 border rounded\"><p className=\"text-red-600 text-center\">\r\n                {error}</p></div>}              \r\n\r\n              <div className=\"text-center mt-6\">\r\n                <button\r\n                  className=\"bg-purple-600 hover:bg-purple-500 text-white active:bg-gray-700 text-sm font-bold uppercase px-6 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 w-full\"\r\n                  type=\"submit\">\r\n                  Send password verification email\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex flex-wrap text-lg md:text-xl mt-6\">\r\n          <div className=\"w-2/3 md:w-1/2\">\r\n            <span onClick={(e) => setView('Landing', e)} className=\"text-gray-600 font-bold italic cursor-pointer\">\r\n              <small>&lt; Back to Login Screen</small>\r\n            </span>\r\n          </div>          \r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n    </>\r\n  );\r\n}","import React, { useContext } from 'react';\r\nimport { GlobalContext } from './context/GlobalState';\r\nimport { AuthProvider } from './context/AuthContext';\r\nimport { GroupListenerProvider } from './context/GroupListener';\r\nimport { Navtop } from './components/Navtop';\r\nimport { ModalTemplate } from './components/modals/ModalTemplate';\r\nimport { viewSwitch } from './helpers/viewSwitch';\r\n\r\nfunction App() {  \r\n  const { renderStatus } = useContext(GlobalContext);\r\n  const View = viewSwitch(renderStatus.currentView);\r\n\r\n  return (     \r\n    <>\r\n    <AuthProvider>\r\n      <GroupListenerProvider>\r\n        <img src=\"./img/car-driving.png\" alt=\"car-driving\" className=\"w-1/6 hidden md:block absolute left-0 bottom-0 ml-8 mb-12 -z-10 \"/>\r\n        <Navtop /> \r\n        <View />      \r\n        {renderStatus.modalView !== false && <ModalTemplate />} \r\n      </GroupListenerProvider>\r\n    </AuthProvider>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { LandingPage } from '../components/views/Landing';\r\nimport { CreateAccount } from '../components/views/CreateAccount';\r\nimport { MainAppView } from '../components/views/MainAppView';\r\nimport { GroupSelect } from '../components/views/GroupSelect';\r\nimport { ForgotPassword } from '../components/views/ForgotPassword';\r\n\r\nexport const viewSwitch = (currentView) => {\r\n  switch (currentView) {\r\n  case 'Landing':     \r\n    return LandingPage;\r\n  case 'CreateAccount':     \r\n    return CreateAccount;\r\n  case 'MainAppView': \r\n    return MainAppView;\r\n  case 'GroupSelect': \r\n    return GroupSelect;\r\n  case 'ForgotPassword':\r\n    return ForgotPassword;\r\n  default:\r\n    return 'none';\r\n  } \r\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './styles/App.css';\nimport './styles/index.css';\nimport './styles/balloon.min.css';\nimport './styles/animate.min.css';\n\nimport App from './App';\nimport { GlobalProvider } from './context/GlobalState';\n\nReactDOM.render(<GlobalProvider><App /></GlobalProvider>, document.getElementById('root'));\n\n\n"],"sourceRoot":""}